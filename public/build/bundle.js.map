{"version":3,"file":"bundle.js","sources":["../../node_modules/svelte/internal/index.mjs","../../src/actions/inView.js","../../node_modules/d3-selection/src/namespaces.js","../../node_modules/d3-selection/src/namespace.js","../../node_modules/d3-selection/src/creator.js","../../node_modules/d3-selection/src/selector.js","../../node_modules/d3-selection/src/array.js","../../node_modules/d3-selection/src/selectorAll.js","../../node_modules/d3-selection/src/matcher.js","../../node_modules/d3-selection/src/selection/selectChild.js","../../node_modules/d3-selection/src/selection/selectChildren.js","../../node_modules/d3-selection/src/selection/sparse.js","../../node_modules/d3-selection/src/selection/enter.js","../../node_modules/d3-selection/src/constant.js","../../node_modules/d3-selection/src/selection/data.js","../../node_modules/d3-selection/src/selection/sort.js","../../node_modules/d3-selection/src/selection/attr.js","../../node_modules/d3-selection/src/window.js","../../node_modules/d3-selection/src/selection/style.js","../../node_modules/d3-selection/src/selection/property.js","../../node_modules/d3-selection/src/selection/classed.js","../../node_modules/d3-selection/src/selection/text.js","../../node_modules/d3-selection/src/selection/html.js","../../node_modules/d3-selection/src/selection/raise.js","../../node_modules/d3-selection/src/selection/lower.js","../../node_modules/d3-selection/src/selection/insert.js","../../node_modules/d3-selection/src/selection/remove.js","../../node_modules/d3-selection/src/selection/clone.js","../../node_modules/d3-selection/src/selection/on.js","../../node_modules/d3-selection/src/selection/dispatch.js","../../node_modules/d3-selection/src/selection/index.js","../../node_modules/d3-selection/src/select.js","../../node_modules/d3-selection/src/selectAll.js","../../src/components/Text.svelte","../../node_modules/d3-selection/src/selection/select.js","../../node_modules/d3-selection/src/selection/selectAll.js","../../node_modules/d3-selection/src/selection/filter.js","../../node_modules/d3-selection/src/selection/exit.js","../../node_modules/d3-selection/src/selection/join.js","../../node_modules/d3-selection/src/selection/merge.js","../../node_modules/d3-selection/src/selection/order.js","../../node_modules/d3-selection/src/selection/call.js","../../node_modules/d3-selection/src/selection/nodes.js","../../node_modules/d3-selection/src/selection/node.js","../../node_modules/d3-selection/src/selection/size.js","../../node_modules/d3-selection/src/selection/empty.js","../../node_modules/d3-selection/src/selection/each.js","../../node_modules/d3-selection/src/selection/append.js","../../node_modules/d3-selection/src/selection/datum.js","../../node_modules/d3-selection/src/selection/iterator.js","../../src/components/Pole.svelte","../../src/components/Chapstick.svelte","../../node_modules/d3-array/src/ascending.js","../../node_modules/internmap/src/index.js","../../node_modules/d3-array/src/identity.js","../../node_modules/d3-array/src/group.js","../../src/components/BlockChart.svelte","../../src/components/SmallChart.svelte","../../src/components/pudding/Header.svelte","../../src/components/pudding/Footer.svelte","../../node_modules/intersection-observer/intersection-observer.js","../../node_modules/scrollama/build/scrollama.js","../../src/components/App.svelte","../../src/main.js"],"sourcesContent":["function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\nfunction is_promise(value) {\n    return value && typeof value === 'object' && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction is_empty(obj) {\n    return Object.keys(obj).length === 0;\n}\nfunction validate_store(store, name) {\n    if (store != null && typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, ...callbacks) {\n    if (store == null) {\n        return noop;\n    }\n    const unsub = store.subscribe(...callbacks);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, $$scope, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n    return definition[1] && fn\n        ? assign($$scope.ctx.slice(), definition[1](fn(ctx)))\n        : $$scope.ctx;\n}\nfunction get_slot_changes(definition, $$scope, dirty, fn) {\n    if (definition[2] && fn) {\n        const lets = definition[2](fn(dirty));\n        if ($$scope.dirty === undefined) {\n            return lets;\n        }\n        if (typeof lets === 'object') {\n            const merged = [];\n            const len = Math.max($$scope.dirty.length, lets.length);\n            for (let i = 0; i < len; i += 1) {\n                merged[i] = $$scope.dirty[i] | lets[i];\n            }\n            return merged;\n        }\n        return $$scope.dirty | lets;\n    }\n    return $$scope.dirty;\n}\nfunction update_slot(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction update_slot_spread(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_spread_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_spread_changes_fn(dirty) | get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction compute_rest_props(props, keys) {\n    const rest = {};\n    keys = new Set(keys);\n    for (const k in props)\n        if (!keys.has(k) && k[0] !== '$')\n            rest[k] = props[k];\n    return rest;\n}\nfunction compute_slots(slots) {\n    const result = {};\n    for (const key in slots) {\n        result[key] = true;\n    }\n    return result;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value = ret) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nfunction run_tasks(now) {\n    tasks.forEach(task => {\n        if (!task.c(now)) {\n            tasks.delete(task);\n            task.f();\n        }\n    });\n    if (tasks.size !== 0)\n        raf(run_tasks);\n}\n/**\n * For testing purposes only!\n */\nfunction clear_loops() {\n    tasks.clear();\n}\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n */\nfunction loop(callback) {\n    let task;\n    if (tasks.size === 0)\n        raf(run_tasks);\n    return {\n        promise: new Promise(fulfill => {\n            tasks.add(task = { c: callback, f: fulfill });\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key === '__value') {\n            node.value = node[key] = attributes[key];\n        }\n        else if (descriptors[key] && descriptors[key].set) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group, __value, checked) {\n    const value = new Set();\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.add(group[i].__value);\n    }\n    if (!checked) {\n        value.delete(__value);\n    }\n    return Array.from(value);\n}\nfunction to_number(value) {\n    return value === '' ? null : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction claim_element(nodes, name, attributes, svg) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeName === name) {\n            let j = 0;\n            const remove = [];\n            while (j < node.attributes.length) {\n                const attribute = node.attributes[j++];\n                if (!attributes[attribute.name]) {\n                    remove.push(attribute.name);\n                }\n            }\n            for (let k = 0; k < remove.length; k++) {\n                node.removeAttribute(remove[k]);\n            }\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return svg ? svg_element(name) : element(name);\n}\nfunction claim_text(nodes, data) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 3) {\n            node.data = '' + data;\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return text(data);\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.wholeText !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    input.value = value == null ? '' : value;\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    node.style.setProperty(key, value, important ? 'important' : '');\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\nlet crossorigin;\nfunction is_crossorigin() {\n    if (crossorigin === undefined) {\n        crossorigin = false;\n        try {\n            if (typeof window !== 'undefined' && window.parent) {\n                void window.parent.document;\n            }\n        }\n        catch (error) {\n            crossorigin = true;\n        }\n    }\n    return crossorigin;\n}\nfunction add_resize_listener(node, fn) {\n    const computed_style = getComputedStyle(node);\n    if (computed_style.position === 'static') {\n        node.style.position = 'relative';\n    }\n    const iframe = element('iframe');\n    iframe.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n        'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;');\n    iframe.setAttribute('aria-hidden', 'true');\n    iframe.tabIndex = -1;\n    const crossorigin = is_crossorigin();\n    let unsubscribe;\n    if (crossorigin) {\n        iframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n        unsubscribe = listen(window, 'message', (event) => {\n            if (event.source === iframe.contentWindow)\n                fn();\n        });\n    }\n    else {\n        iframe.src = 'about:blank';\n        iframe.onload = () => {\n            unsubscribe = listen(iframe.contentWindow, 'resize', fn);\n        };\n    }\n    append(node, iframe);\n    return () => {\n        if (crossorigin) {\n            unsubscribe();\n        }\n        else if (unsubscribe && iframe.contentWindow) {\n            unsubscribe();\n        }\n        detach(iframe);\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, false, false, detail);\n    return e;\n}\nfunction query_selector_all(selector, parent = document.body) {\n    return Array.from(parent.querySelectorAll(selector));\n}\nclass HtmlTag {\n    constructor(anchor = null) {\n        this.a = anchor;\n        this.e = this.n = null;\n    }\n    m(html, target, anchor = null) {\n        if (!this.e) {\n            this.e = element(target.nodeName);\n            this.t = target;\n            this.h(html);\n        }\n        this.i(anchor);\n    }\n    h(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(this.t, this.n[i], anchor);\n        }\n    }\n    p(html) {\n        this.d();\n        this.h(html);\n        this.i(this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\nfunction attribute_to_object(attributes) {\n    const result = {};\n    for (const attribute of attributes) {\n        result[attribute.name] = attribute.value;\n    }\n    return result;\n}\nfunction get_custom_elements_slots(element) {\n    const result = {};\n    element.childNodes.forEach((node) => {\n        result[node.slot || 'default'] = true;\n    });\n    return result;\n}\n\nconst active_docs = new Set();\nlet active = 0;\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    const doc = node.ownerDocument;\n    active_docs.add(doc);\n    const stylesheet = doc.__svelte_stylesheet || (doc.__svelte_stylesheet = doc.head.appendChild(element('style')).sheet);\n    const current_rules = doc.__svelte_rules || (doc.__svelte_rules = {});\n    if (!current_rules[name]) {\n        current_rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ''}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    const previous = (node.style.animation || '').split(', ');\n    const next = previous.filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    );\n    const deleted = previous.length - next.length;\n    if (deleted) {\n        node.style.animation = next.join(', ');\n        active -= deleted;\n        if (!active)\n            clear_rules();\n    }\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        active_docs.forEach(doc => {\n            const stylesheet = doc.__svelte_stylesheet;\n            let i = stylesheet.cssRules.length;\n            while (i--)\n                stylesheet.deleteRule(i);\n            doc.__svelte_rules = {};\n        });\n        active_docs.clear();\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error('Function called outside component initialization');\n    return current_component;\n}\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail);\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n        }\n    };\n}\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n}\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\nfunction hasContext(key) {\n    return get_current_component().$$.context.has(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        callbacks.slice().forEach(fn => fn(event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\nlet flushing = false;\nconst seen_callbacks = new Set();\nfunction flush() {\n    if (flushing)\n        return;\n    flushing = true;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        for (let i = 0; i < dirty_components.length; i += 1) {\n            const component = dirty_components[i];\n            set_current_component(component);\n            update(component.$$);\n        }\n        set_current_component(null);\n        dirty_components.length = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    flushing = false;\n    seen_callbacks.clear();\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config();\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config();\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    let config = fn(node, params);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = program.b - t;\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program || pending_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro — we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro — needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config();\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = value;\n        let child_ctx = info.ctx;\n        if (key !== undefined) {\n            child_ctx = child_ctx.slice();\n            child_ctx[key] = value;\n        }\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            if (info.blocks[i] === block) {\n                                info.blocks[i] = null;\n                            }\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n            if (!info.hasCatch) {\n                throw error;\n            }\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = promise;\n    }\n}\n\nconst globals = (typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n        ? globalThis\n        : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(child_ctx, dirty);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction validate_each_keys(ctx, list, get_context, get_key) {\n    const keys = new Set();\n    for (let i = 0; i < list.length; i++) {\n        const key = get_key(get_context(ctx, list, i));\n        if (keys.has(key)) {\n            throw new Error('Cannot have duplicate keys in a keyed each');\n        }\n        keys.add(key);\n    }\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\n// source: https://html.spec.whatwg.org/multipage/indices.html\nconst boolean_attributes = new Set([\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n]);\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, classes_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (classes_to_add) {\n        if (attributes.class == null) {\n            attributes.class = classes_to_add;\n        }\n        else {\n            attributes.class += ' ' + classes_to_add;\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += ' ' + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += ' ' + name;\n        }\n        else if (value != null) {\n            str += ` ${name}=\"${String(value).replace(/\"/g, '&#34;').replace(/'/g, '&#39;')}\"`;\n        }\n    });\n    return str;\n}\nconst escaped = {\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;'\n};\nfunction escape(html) {\n    return String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(parent_component ? parent_component.$$.context : []),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, options = {}) => {\n            on_destroy = [];\n            const result = { title: '', head: '', css: new Set() };\n            const html = $$render(result, props, {}, options);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.title + result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    return ` ${name}${value === true ? '' : `=${typeof value === 'string' ? JSON.stringify(escape(value)) : `\"${value}\"`}`}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : '';\n}\n\nfunction bind(component, name, callback) {\n    const index = component.$$.props[name];\n    if (index !== undefined) {\n        component.$$.bound[index] = callback;\n        callback(component.$$.ctx[index]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor, customElement) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    if (!customElement) {\n        // onMount happens before the initial afterUpdate\n        add_render_callback(() => {\n            const new_on_destroy = on_mount.map(run).filter(is_function);\n            if (on_destroy) {\n                on_destroy.push(...new_on_destroy);\n            }\n            else {\n                // Edge case - component was destroyed immediately,\n                // most likely as a result of a binding initialising\n                run_all(new_on_destroy);\n            }\n            component.$$.on_mount = [];\n        });\n    }\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        on_disconnect: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(parent_component ? parent_component.$$.context : []),\n        // everything else\n        callbacks: blank_object(),\n        dirty,\n        skip_bound: false\n    };\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, options.props || {}, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if (!$$.skip_bound && $$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            const nodes = children(options.target);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(nodes);\n            nodes.forEach(detach);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor, options.customElement);\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            const { on_mount } = this.$$;\n            this.$$.on_disconnect = on_mount.map(run).filter(is_function);\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        disconnectedCallback() {\n            run_all(this.$$.on_disconnect);\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set($$props) {\n            if (this.$$set && !is_empty($$props)) {\n                this.$$.skip_bound = true;\n                this.$$set($$props);\n                this.$$.skip_bound = false;\n            }\n        }\n    };\n}\n/**\n * Base class for Svelte components. Used when dev=false.\n */\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set($$props) {\n        if (this.$$set && !is_empty($$props)) {\n            this.$$.skip_bound = true;\n            this.$$set($$props);\n            this.$$.skip_bound = false;\n        }\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.35.0' }, detail)));\n}\nfunction append_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev('SvelteDOMRemove', { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? ['capture'] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev('SvelteDOMAddEventListener', { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev('SvelteDOMRemoveEventListener', { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev('SvelteDOMRemoveAttribute', { node, attribute });\n    else\n        dispatch_dev('SvelteDOMSetAttribute', { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev('SvelteDOMSetProperty', { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev('SvelteDOMSetDataset', { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.wholeText === data)\n        return;\n    dispatch_dev('SvelteDOMSetData', { node: text, data });\n    text.data = data;\n}\nfunction validate_each_argument(arg) {\n    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {\n        let msg = '{#each} only iterates over array-like objects.';\n        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {\n            msg += ' You can use a spread to convert this iterable into an array.';\n        }\n        throw new Error(msg);\n    }\n}\nfunction validate_slots(name, slot, keys) {\n    for (const slot_key of Object.keys(slot)) {\n        if (!~keys.indexOf(slot_key)) {\n            console.warn(`<${name}> received an unexpected slot \"${slot_key}\".`);\n        }\n    }\n}\n/**\n * Base class for Svelte components with some minor dev-enhancements. Used when dev=true.\n */\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(\"'target' is a required option\");\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn('Component was already destroyed'); // eslint-disable-line no-console\n        };\n    }\n    $capture_state() { }\n    $inject_state() { }\n}\n/**\n * Base class to create strongly typed Svelte components.\n * This only exists for typing purposes and should be used in `.d.ts` files.\n *\n * ### Example:\n *\n * You have component library on npm called `component-library`, from which\n * you export a component called `MyComponent`. For Svelte+TypeScript users,\n * you want to provide typings. Therefore you create a `index.d.ts`:\n * ```ts\n * import { SvelteComponentTyped } from \"svelte\";\n * export class MyComponent extends SvelteComponentTyped<{foo: string}> {}\n * ```\n * Typing this makes it possible for IDEs like VS Code with the Svelte extension\n * to provide intellisense and to use the component like this in a Svelte file\n * with TypeScript:\n * ```svelte\n * <script lang=\"ts\">\n * \timport { MyComponent } from \"component-library\";\n * </script>\n * <MyComponent foo={'bar'} />\n * ```\n *\n * #### Why not make this part of `SvelteComponent(Dev)`?\n * Because\n * ```ts\n * class ASubclassOfSvelteComponent extends SvelteComponent<{foo: string}> {}\n * const component: typeof SvelteComponent = ASubclassOfSvelteComponent;\n * ```\n * will throw a type error, so we need to seperate the more strictly typed class.\n */\nclass SvelteComponentTyped extends SvelteComponentDev {\n    constructor(options) {\n        super(options);\n    }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error('Infinite loop detected');\n        }\n    };\n}\n\nexport { HtmlTag, SvelteComponent, SvelteComponentDev, SvelteComponentTyped, SvelteElement, action_destroyer, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_transform, afterUpdate, append, append_dev, assign, attr, attr_dev, attribute_to_object, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_component, claim_element, claim_space, claim_text, clear_loops, component_subscribe, compute_rest_props, compute_slots, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, escape, escaped, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getContext, get_binding_group_value, get_current_component, get_custom_elements_slots, get_slot_changes, get_slot_context, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, hasContext, has_prop, identity, init, insert, insert_dev, intros, invalid_attribute_name_character, is_client, is_crossorigin, is_empty, is_function, is_promise, listen, listen_dev, loop, loop_guard, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, query_selector_all, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, update_keyed_each, update_slot, update_slot_spread, validate_component, validate_each_argument, validate_each_keys, validate_slots, validate_store, xlink_attr };\n","/**\n * This action triggers a custom event on node entering/exiting the viewport.\n * example:\n * <p\n * \tuse:inView\n * \ton:enter={() => console.log(\"enter\")}\n * \ton:exit={() => console.log(\"exit\")}\n * >\n * \n * optional params { root, top, bottom }\n * top and bottom are numbers\n * use:inView={ bottom: 100 } // 100 pixels from bottom of viewport\n */\n\nexport default function inView(node, params = {}) {\n\tlet observer;\n\n\tconst handleIntersect = (e) => {\n\t\tconst v = e[0].isIntersecting ? \"enter\" : \"exit\";\n\t\tnode.dispatchEvent(new CustomEvent(v));\n\t};\n\t\n\tconst setObserver = ({ root, top, bottom }) => {\n\t\tconst marginTop = top ? top * -1 : 0;\n\t\tconst marginBottom = bottom ? bottom * -1 : 0;\n\t\tconst rootMargin = `${marginTop}px 0px ${marginBottom}px 0px`;\n\t\tconst options = { root, rootMargin };\n\t\tif (observer) observer.disconnect();\n\t\tobserver = new IntersectionObserver(handleIntersect, options);;\n\t\tobserver.observe(node);\n\t}\n\n\tsetObserver(params);\n\n\treturn {\n\t\tupdate(params) {\n\t\t\tsetObserver(params);\n\t\t},\n\n\t\tdestroy() {\n\t\t\tif (observer) observer.disconnect();\n\t\t}\n\t};\n}","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces.js\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name; // eslint-disable-line no-prototype-builtins\n}\n","import namespace from \"./namespace.js\";\nimport {xhtml} from \"./namespaces.js\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","export default function(x) {\n  return typeof x === \"object\" && \"length\" in x\n    ? x // Array, TypedArray, NodeList, array-like\n    : Array.from(x); // Map, Set, iterable, string, or anything else\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n\nexport function childMatcher(selector) {\n  return function(node) {\n    return node.matches(selector);\n  };\n}\n\n","import {childMatcher} from \"../matcher.js\";\n\nvar find = Array.prototype.find;\n\nfunction childFind(match) {\n  return function() {\n    return find.call(this.children, match);\n  };\n}\n\nfunction childFirst() {\n  return this.firstElementChild;\n}\n\nexport default function(match) {\n  return this.select(match == null ? childFirst\n      : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {childMatcher} from \"../matcher.js\";\n\nvar filter = Array.prototype.filter;\n\nfunction children() {\n  return this.children;\n}\n\nfunction childrenFilter(match) {\n  return function() {\n    return filter.call(this.children, match);\n  };\n}\n\nexport default function(match) {\n  return this.selectAll(match == null ? children\n      : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {Selection} from \"./index.js\";\nimport {EnterNode} from \"./enter.js\";\nimport array from \"../array.js\";\nimport constant from \"../constant.js\";\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that don’t fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = new Map,\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue.get(keyValues[i]) === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction datum(node) {\n  return node.__data__;\n}\n\nexport default function(value, key) {\n  if (!arguments.length) return Array.from(this, datum);\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = array(value.call(parent, parent && parent.__data__, j, parents)),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import namespace from \"../namespace.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window.js\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import creator from \"../creator.js\";\nimport selector from \"../selector.js\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","function contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, options: options};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, options));\n  return this;\n}\n","import defaultView from \"../window.js\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","import selection_select from \"./select.js\";\nimport selection_selectAll from \"./selectAll.js\";\nimport selection_selectChild from \"./selectChild.js\";\nimport selection_selectChildren from \"./selectChildren.js\";\nimport selection_filter from \"./filter.js\";\nimport selection_data from \"./data.js\";\nimport selection_enter from \"./enter.js\";\nimport selection_exit from \"./exit.js\";\nimport selection_join from \"./join.js\";\nimport selection_merge from \"./merge.js\";\nimport selection_order from \"./order.js\";\nimport selection_sort from \"./sort.js\";\nimport selection_call from \"./call.js\";\nimport selection_nodes from \"./nodes.js\";\nimport selection_node from \"./node.js\";\nimport selection_size from \"./size.js\";\nimport selection_empty from \"./empty.js\";\nimport selection_each from \"./each.js\";\nimport selection_attr from \"./attr.js\";\nimport selection_style from \"./style.js\";\nimport selection_property from \"./property.js\";\nimport selection_classed from \"./classed.js\";\nimport selection_text from \"./text.js\";\nimport selection_html from \"./html.js\";\nimport selection_raise from \"./raise.js\";\nimport selection_lower from \"./lower.js\";\nimport selection_append from \"./append.js\";\nimport selection_insert from \"./insert.js\";\nimport selection_remove from \"./remove.js\";\nimport selection_clone from \"./clone.js\";\nimport selection_datum from \"./datum.js\";\nimport selection_on from \"./on.js\";\nimport selection_dispatch from \"./dispatch.js\";\nimport selection_iterator from \"./iterator.js\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nfunction selection_selection() {\n  return this;\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch,\n  [Symbol.iterator]: selection_iterator\n};\n\nexport default selection;\n","import {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","import array from \"./array.js\";\nimport {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([document.querySelectorAll(selector)], [document.documentElement])\n      : new Selection([selector == null ? [] : array(selector)], root);\n}\n","<script>\n    export let copy;\n    export let section;\n\n    let sectionNum = parseInt(section);\n    let visibleChapstick = false;\n    let chapstickDivs;\n\n    let visibleBestBuy = false;\n    let buildingDiv;\n    let dvdDiv;\n    let flagDiv;\n    \n    import { onMount } from 'svelte';\n    import inView from \"../actions/inView.js\";\n    import {selection, select, selectAll} from \"d3-selection\";\n\n    onMount(() => {\n        chapstickDivs = selectAll(\"#chapstick div\");\n        buildingDiv = selectAll(\"#bestbuy .left-scene .building\");\n        dvdDiv = selectAll(\"#bestbuy .dvd\");\n        flagDiv = selectAll(\"#bestbuy .flag\");\n\t});\n\n    function showChapstick() {\n        visibleChapstick = !visibleChapstick\n        if (visibleChapstick) { chapstickDivs.classed(\"animation\", true) }\n        else { chapstickDivs.classed(\"animation\", false) }\n    }\n\n    function animationSequence() {\n        if (visibleBestBuy) { \n            buildingDiv.classed(\"on-screen\", true) \n            buildingDiv.classed(\"off-screen\", false) \n            dvdDiv.classed(\"on-screen\", true) \n            dvdDiv.classed(\"off-screen\", false) \n        }\n        else { \n            buildingDiv.classed(\"on-screen\", false) \n            buildingDiv.classed(\"off-screen\", true)\n            dvdDiv.classed(\"on-screen\", false) \n            dvdDiv.classed(\"off-screen\", true)  \n        }\n        visibleBestBuy = !visibleBestBuy\n    }\n</script>\n\n{#if sectionNum == 1}\n<section class=\"text\"\n    use:inView\n    on:enter={() => showChapstick()}\n    on:exit={() => showChapstick()}\n>\n    <div class=\"prose\">\n        {#each copy as {value}}\n            <p class>{@html value}</p>\n        {/each}\n    </div>\n</section>\n{:else if sectionNum == 2}\n<section class=\"text\"\n    use:inView\n    on:enter={() => animationSequence()}\n    on:exit={() => animationSequence()}\n>\n    <div class=\"prose\">\n        {#each copy as {value}}\n            <p class>{@html value}</p>\n        {/each}\n    </div>\n</section>\n{:else if sectionNum == 7}\n<section class=\"method\">\n    <h3>Methods & Notes</h3>\n    <div class=\"prose\">\n        {#each copy as {value}}\n            <p class>{@html value}</p>\n        {/each}\n    </div>\n</section>\n{:else}\n<section class=\"text\">\n    <div class=\"prose\">\n        {#each copy as {value}}\n            <p class>{@html value}</p>\n        {/each}\n    </div>\n</section>\n{/if}\n\n<style>\n    .prose {\n        max-width: 40em;\n        margin: 0 auto;\n    }\n\n    p {\n        font-size: 1.5rem;\n        margin: 2rem 0;\n    }\n\n    .method {\n        padding: 5rem 0 0 0;\n    }\n\n    h3 {\n        max-width: 40em;\n        margin: 0 auto;\n        font-size: 1.25rem;\n        font-weight: 700; \n    }\n\n    .method p {\n        font-size: 1rem;\n    }\n</style>","import {Selection} from \"./index.js\";\nimport selector from \"../selector.js\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import {Selection} from \"./index.js\";\nimport array from \"../array.js\";\nimport selectorAll from \"../selectorAll.js\";\n\nfunction arrayAll(select) {\n  return function() {\n    var group = select.apply(this, arguments);\n    return group == null ? [] : array(group);\n  };\n}\n\nexport default function(select) {\n  if (typeof select === \"function\") select = arrayAll(select);\n  else select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","import {Selection} from \"./index.js\";\nimport matcher from \"../matcher.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  enter = typeof onenter === \"function\" ? onenter(enter) : enter.append(onenter + \"\");\n  if (onupdate != null) update = onupdate(update);\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(selection) {\n  if (!(selection instanceof Selection)) throw new Error(\"invalid merge\");\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  let size = 0;\n  for (const node of this) ++size; // eslint-disable-line no-unused-vars\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import creator from \"../creator.js\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","export default function*() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) yield node;\n    }\n  }\n}\n","<script>\n    import { onMount } from 'svelte';\n    import inView from \"../actions/inView.js\";\n\n    let y;\n    let innerHeight;\n    let padding = 200;\n    let h;\n\n    onMount(() => {\n\t\th = Math.max(\n            document.body.clientHeight, \n            document.body.scrollHeight,\n            document.body.offsetHeight\n        );\n\t});\n</script>\n\n<svelte:window bind:scrollY={y} />\n\n<section id=\"pole\">\n    <div>\n        <div class=\"line\" style=\"height: {h*1.75}px;\"></div>\n        <div class=\"lil-nas-x\" style=\"transform: translate(0,{y + padding}px)\">\n            <img src=\"assets/images/lilnasx.png\">\n        </div>\n    </div>\n</section>\n\n<style>\n    #pole {\n        position: absolute;\n        top: 0;\n        right: 6rem;\n        pointer-events: none;\n    }\n\n    div {\n        position: relative;\n    }\n\n    .line {\n        position: absolute;\n        width: 10px;\n        background-color: var(--off-black); \n    }\n\n    .lil-nas-x {\n        position: absolute;\n        right: -75px;\n        height: 150px;\n        width: 150px;\n    }\n</style>","<script>\n    import { onMount } from 'svelte';\n    import {selection, select, selectAll} from \"d3-selection\";\n    import inView from \"../actions/inView.js\";\n\n    let y;\n    let innerHeight;\n    let padding = 200;\n    let h;\n    let triggerChapstick;\n\n    onMount(() => {\n\t\th = Math.max(\n            document.body.scrollHeight, document.documentElement.scrollHeight,\n            document.body.offsetHeight, document.documentElement.offsetHeight,\n            document.body.clientHeight, document.documentElement.clientHeight\n        );\n\t});\n</script>\n\n<section id=\"chapstick\" style=\"height: {h}px;\">\n    <div></div>\n    <div></div>\n    <div></div>\n    <div></div>\n    <div></div>\n    <div></div>\n    <div></div>\n    <div></div>\n</section>\n\n<style>\n    #chapstick {\n        position: absolute;\n        pointer-events: none;\n        width: 100%;\n        display: flex;\n        justify-content: space-around;\n        flex-wrap: wrap;\n        display: none;\n    }\n\n    div { \n        width: 200px;\n        height: 63px;\n        background-image: url(\"assets/images/chapstick.png\");\n        background-repeat: no-repeat;\n        background-size: contain;\n        opacity: 0;\n    }\n</style>","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export class InternMap extends Map {\n  constructor(entries = [], key = keyof) {\n    super();\n    Object.defineProperties(this, {_intern: {value: new Map()}, _key: {value: key}});\n    for (const [key, value] of entries) this.set(key, value);\n  }\n  get(key) {\n    return super.get(intern_get(this, key));\n  }\n  has(key) {\n    return super.has(intern_get(this, key));\n  }\n  set(key, value) {\n    return super.set(intern_set(this, key), value);\n  }\n  delete(key) {\n    return super.delete(intern_delete(this, key));\n  }\n}\n\nexport class InternSet extends Set {\n  constructor(values = [], key = keyof) {\n    super();\n    Object.defineProperties(this, {_intern: {value: new Map()}, _key: {value: key}});\n    for (const value of values) this.add(value);\n  }\n  has(value) {\n    return super.has(intern_get(this, value));\n  }\n  add(value) {\n    return super.add(intern_set(this, value));\n  }\n  delete(value) {\n    return super.delete(intern_delete(this, value));\n  }\n}\n\nfunction intern_get({_intern, _key}, value) {\n  const key = _key(value);\n  return _intern.has(key) ? _intern.get(key) : value;\n}\n\nfunction intern_set({_intern, _key}, value) {\n  const key = _key(value);\n  if (_intern.has(key)) return _intern.get(key);\n  _intern.set(key, value);\n  return value;\n}\n\nfunction intern_delete({_intern, _key}, value) {\n  const key = _key(value);\n  if (_intern.has(key)) {\n    value = _intern.get(value);\n    _intern.delete(key);\n  }\n  return value;\n}\n\nfunction keyof(value) {\n  return value !== null && typeof value === \"object\" ? value.valueOf() : value;\n}\n","export default function(x) {\n  return x;\n}\n","import {InternMap} from \"internmap\";\nimport identity from \"./identity.js\";\n\nexport default function group(values, ...keys) {\n  return nest(values, identity, identity, keys);\n}\n\nexport function groups(values, ...keys) {\n  return nest(values, Array.from, identity, keys);\n}\n\nexport function rollup(values, reduce, ...keys) {\n  return nest(values, identity, reduce, keys);\n}\n\nexport function rollups(values, reduce, ...keys) {\n  return nest(values, Array.from, reduce, keys);\n}\n\nexport function index(values, ...keys) {\n  return nest(values, identity, unique, keys);\n}\n\nexport function indexes(values, ...keys) {\n  return nest(values, Array.from, unique, keys);\n}\n\nfunction unique(values) {\n  if (values.length !== 1) throw new Error(\"duplicate key\");\n  return values[0];\n}\n\nfunction nest(values, map, reduce, keys) {\n  return (function regroup(values, i) {\n    if (i >= keys.length) return reduce(values);\n    const groups = new InternMap();\n    const keyof = keys[i++];\n    let index = -1;\n    for (const value of values) {\n      const key = keyof(value, ++index, values);\n      const group = groups.get(key);\n      if (group) group.push(value);\n      else groups.set(key, [value]);\n    }\n    for (const [key, values] of groups) {\n      groups.set(key, regroup(values, i));\n    }\n    return map(groups);\n  })(values, 0);\n}\n","<script>\n    import { onMount } from 'svelte';\n    import {selection, select, selectAll} from \"d3-selection\";\n    import {groups, sort, ascending} from \"d3-array\";\n    import copy from \"../data/doc.json\";\nimport { select_value } from 'svelte/internal';\n\n    export let data;\n    let dataByYear = groups(data, d => d.year).sort(ascending);\n\n    console.log(copy.prose4[0].song)\n</script>\n\n<section id=\"blockchart\">\n    <div id=\"scroll\">\n        <div class=\"scroll__graphic sticky\">\n            <div>\n                <div class=\"ranking\">\n                    <p>#1</p>\n                    <p>#100</p>\n                </div>\n                {#each dataByYear as year, i}\n                    <div class=\"year year-{year[0]}\">\n                        <p>{year[0]}</p>\n                        <div class=\"year-wrapper\">\n                            {#each year[1] as song}\n                                {#if song.lyricFlag == 1}\n                                    <div class=\"song song-highlight {song.artist}\"></div>\n                                {:else}\n                                    <div class=\"song\"></div>\n                                {/if}\n                            {/each}\n                        </div>\n                    </div>\n                {/each}\n            </div>\n        </div>\n        <div class='scroll__text'>\n                {#each copy.prose4 as value, i}\n                    <div class=\"step\" data-step=\"{i}\" id=\"step-{i}\">\n                        <p class>{@html value.song}\n                            {#if value.lyrics !== undefined}\n                            <br>\n                            <span class=\"lyrics\">{@html value.lyrics}</span>\n                            {/if}\n                        </p>\n                    </div>\n                {/each}\n        </div>\n    </div>\n    <div class=\"tooltip\"></div>\n</section>\n\n<style>\n    #blockchart {\n        max-width: 60em;\n        margin: 0 auto;\n    }\n\n    #scroll {\n        position: relative\n    }\n\n    .scroll__graphic {\n        width: 100%;\n        position: sticky;\n        top: 3rem;\n        right: 0;\n        transform: translate3d(0,0,0)\n    }\n\n    .scroll__text {\n        position: relative;\n        top: 0;\n        max-width: 35rem;\n        width: 100%;\n        padding: 0 2rem;\n        margin: 1rem auto;\n        pointer-events: none;\n        z-index: 1000;\n    }\n\n    .step.is-active {\n        opacity: 1;\n    }\n\n    .step {\n        margin: 2rem auto;\n\t\topacity: 0.5; \n    }\n\n    .step p {\n        background-color: rgba(255, 255, 255, 0.95);\n        font-size: 1.5rem;\t\n        padding: 1rem;\n        box-shadow: 0.25rem 0.25rem 2rem rgba(var(--off-black), 0.125);\t\n        line-height: 1.75;\n    }\n\n    .lyrics {\n        font-style: italic;\n        font-size: 1.25rem;\n    }\n\n    .tooltip {\n        position: absolute;\n    }\n\n    .ranking {\n        width: calc(100% - 3rem);\n        margin: 0 0 0 3rem;\n        display: flex;\n        flex-direction: row;\n        justify-content: space-between;\n    }\n\n    .year {\n        width: 100%;\n        height: 30px;\n        display: flex;\n        flex-direction: row;\n        margin: 0 0 0.5rem 0;\n    }\n\n    .year p {\n        width: 3rem;\n        margin: 0;\n    }\n\n    .year-wrapper {\n        display: flex;\n        flex-direction: row;\n        width: calc(100% - 3rem);\n    }\n\n    .song {\n        width: 0.25rem;\n        margin: 0 0.125rem;\n        height: 2rem;\n        background: rgba(255,255,255,0.5);\n        pointer-events: none;\n        transition: width 0.5s ease-in;\n        background-size: 2rem 2rem;\n    }\n\n    .song-highlight {\n        background-color: cyan;\n        outline: 2px solid var(--off-black);\n    }\n\n    .is-highlighted {\n        width: 2rem;\n        background-size: 2rem 2rem;\n    }\n\n</style>","<script>\n    import { onMount } from 'svelte';\n    import {selection, select, selectAll} from \"d3-selection\";\n    import {groups, sort, ascending, filter, rollup} from \"d3-array\";\n    import copy from \"../data/doc.json\";\n\n    export let data;\n    let dataQueerArtists = data.filter(d => d.queerFlag == 1);\n    dataQueerArtists = dataQueerArtists.sort((a,b) => ascending(a.relationshipType, b.relationshipType))\n    let dataQueerSpotlight = groups(dataQueerArtists, d => d.artistID)\n    let dataSpotlightCount = rollup(dataQueerArtists, v => v.length, d => d.artistID)\n\n    function songClick() {\n        console.log(this);\n    }\n</script>\n\n<section id=\"smallchart\">\n    <div class=\"key\">\n        <div class=\"key-block\">\n            <div class=\"block same-gender\"></div>\n            <p>Same-gender</p>\n        </div>\n        <div class=\"key-block\">\n            <div class=\"block opposite-gender\"></div>\n            <p>Opposite-gender</p>\n        </div>\n        <div class=\"key-block\">\n            <div class=\"block unspecified-gender\"></div>\n            <p>Unspecified gender</p>\n        </div>\n        <div class=\"key-block\">\n            <div class=\"block no-relationship\"></div>\n            <p>No relationship</p>\n        </div>\n    </div>\n    <div class=\"cards\">\n        {#each dataQueerSpotlight as artist, i}\n            {#if artist[1].length > 4}\n            <div class=\"card\">\n                <div class=\"img-wrapper\"></div>\n                <p>{artist[0]}</p>\n                <div class=\"songs\">\n                    {#each artist[1] as song, i}\n                        {#if song.relationshipType == \"Both\" || song.relationshipType == \"Queer\"}\n                            <div class=\"song song-queer\" on:click={songClick}></div>\n                        {:else if song.relationshipType == \"Straight\"}\n                            <div class=\"song song-straight\" on:click={songClick}></div>\n                        {:else if song.relationshipType == \"Unspecified\"}\n                            <div class=\"song song-unspecified\" on:click={songClick}></div>\n                        {:else}\n                            <div class=\"song song-none\" on:click={songClick}></div>\n                        {/if}\n                    {/each}\n                </div>\n                <div class=\"tooltip\">\n                    <p class=\"title\">\"{artist[1][0].song}\"</p>\n                    <p class=\"lyrics\">{artist[1][0].sampleLyrics}</p>\n                </div>\n            </div>\n            {/if}\n        {/each}\n    </div>\n</section>\n\n<style>\n    #smallchart {\n        margin: 0 auto;\n    }\n\n    .song {\n        width: 4px;\n        height: 30px;\n        background: var(--gray-light);\n    }\n\n    .song-queer {\n        outline: none;\n        background-color: cyan;\n    }\n\n    .same-gender {\n        background-color: cyan;\n    }\n\n    .song-straight, .opposite-gender {\n        background-color: yellow;\n    }\n\n    .song-unspecified, .unspecified-gender {\n        background-color: magenta;\n    }\n\n    .no-relationship {\n        background: var(--gray-light);\n    }\n\n    .song:hover {\n        outline: 2px solid var(--off-black);\n    }\n    \n    .key {\n        max-width: 60rem;\n        display: flex;\n        flex-direction: row;\n        margin: 0 auto;\n        justify-content: center;\n    }\n\n    .key-block {\n        margin: 0 1rem;\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n    }\n\n    .block {\n        width: 1.125rem;\n        height: 1.125rem;\n        margin: 0 0.25rem 0 0;\n    }\n\n    .key p {\n        margin: 0;\n    }\n\n    .cards {\n        display: flex;\n        flex-direction: row;\n        flex-wrap: wrap;\n        width: 100%;\n        padding: 0 1rem;\n        max-width: 60rem;\n        margin: 0 auto;\n        justify-content: center;\n    }\n\n    .card {\n        width: 15rem;\n        background-color: rgba(255, 255, 255, 0.5);\n        margin: 1rem;\n        padding: 2rem;\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n    }\n    .img-wrapper {\n        width: 5rem;\n        height: 5rem;\n        background-color: var(--gray-light);\n        margin: 0 auto;\n        border-radius: 50%;\n    }\n\n    .card p {\n        font-weight: 700;\n        text-align: center;\n        margin: 1rem 0;\n        font-size: 1.25rem;\n    }\n\n    .songs {\n        display: flex;\n        flex-direction: row;\n        justify-content: center;\n    }\n\n    .card .song {\n        margin: 0 0.125rem;\n    }\n\n    .tooltip .title {\n        font-weight: 500;\n        font-size: 1rem;\n    }\n\n    .tooltip .lyrics {\n        font-weight: 500;\n        font-style: italic;\n        font-size: 1rem;\n    }\n\n</style>","<script>\n  import wordmark from \"../../svg/pudding/wordmark.svg\";\n</script>\n\n<header>\n  <div class=\"wordmark\">\n    <a href=\"https://pudding.cool\">{@html wordmark}</a>\n  </div>\n</header>\n\n<style>\n  .wordmark {\n    max-width: 10em;\n    margin: 1em auto;\n  }\n\n  .wordmark a {\n    border: none;\n    color: var(--fg);\n  }\n\n  .wordmark a:hover {\n    background-color: transparent;\n  }\n</style>\n","<script>\n  import { onMount } from \"svelte\";\n  import wordmark from \"../../svg/pudding/wordmark.svg\";\n\n  const v = Date.now();\n  const url = `https://pudding.cool/assets/data/stories.json?v=${v}`;\n\n  let localURL;\n\n  const links = [\n    { name: \"about\", url: \"https://pudding.cool/about\" },\n    { name: \"facebook\", url: \"https://facebook.com/pudding.viz/\" },\n    { name: \"twitter\", url: \"https://twitter.com/puddingviz/\" },\n    {\n      name: \"instagram\",\n      url: \"https://www.instagram.com/the.pudding\",\n    },\n    { name: \"patreon\", url: \"https://patreon.com/thepudding/\" },\n    { name: \"privacy\", url: \"https://pudding.cool/privacy/\" },\n    { name: \"newsletter\", url: \"http://eepurl.com/czym6f\" },\n    { name: \"rss\", url: \"https://pudding.cool/feed/index.xml\" },\n  ];\n\n  onMount(() => {\n    localURL = window.location.href;\n  });\n\n  const fetchData = (async () => {\n    const response = await fetch(url);\n    const data = await response.json();\n    const stories = data.filter((d) => d.url !== localURL).slice(0, 4);\n    return stories;\n  })();\n</script>\n\n<footer>\n  <section class=\"stories\">\n    {#await fetchData then data}\n      {#each data as { hed, url, image }}\n        <div class=\"story\">\n          <a href=\"https://pudding.cool/{url}\">\n            <img\n              src=\"https://pudding.cool/common/assets/thumbnails/640/{image}.jpg\"\n              alt=\"{hed}\" />\n            <span>{hed}</span>\n          </a>\n        </div>\n      {/each}\n    {/await}\n  </section>\n\n  <section class=\"about\">\n    <div class=\"wordmark\">\n      {@html wordmark}\n    </div>\n    <p>\n      <a href=\"https://pudding.cool\">The Pudding</a>\n      is a digital publication that explains ideas debated in culture with\n      visual essays.\n    </p>\n  </section>\n\n  <section class=\"links\">\n    <ul>\n      {#each links as link}\n        <li>\n          <a href=\"{link.url}\">\n            <!-- TODO icon -->\n            <span>{link.name.toUpperCase()}</span>\n          </a>\n        </li>\n      {/each}\n    </ul>\n  </section>\n</footer>\n\n<style>\n  footer {\n    background-color: var(--text-main);\n    color: var(--background-body);\n    font-family: var(--sans);\n    padding: 3em 1em;\n    margin-top: 3em;\n  }\n\n  a,\n  a:visited,\n  a:hover {\n    color: var(--background-body);\n  }\n\n  .stories {\n    margin: 0 auto;\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: space-between;\n    max-width: 70em;\n  }\n\n  .story {\n    display: block;\n    width: 100%;\n    border: none;\n    margin-bottom: 3rem;\n  }\n\n  .story a {\n    display: block;\n    font-weight: 700;\n    text-decoration: none;\n  }\n\n  .story span {\n    display: block;\n    margin-top: 1em;\n    line-height: 1.2;\n  }\n\n  .wordmark {\n    max-width: 10em;\n    margin: 1em auto;\n  }\n\n  .about {\n    margin: 3rem auto;\n    margin-top: 0;\n    text-align: center;\n  }\n\n  .links ul {\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n  }\n\n  .links li {\n    display: flex;\n    padding: 0.5em 1em;\n  }\n\n  .links a {\n    display: flex;\n    border: none;\n    align-items: center;\n    text-decoration: none;\n  }\n\n  .links span {\n    margin-left: 0.5em;\n  }\n\n  @media only screen and (min-width: 30em) {\n    .story {\n      width: 50%;\n      padding: 0 1em;\n    }\n  }\n\n  @media only screen and (min-width: 50em) {\n    .story {\n      width: 25%;\n      padding: 0 1em;\n    }\n  }\n</style>\n","/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the W3C SOFTWARE AND DOCUMENT NOTICE AND LICENSE.\n *\n *  https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n *\n */\n(function() {\n'use strict';\n\n// Exit early if we're not running in a browser.\nif (typeof window !== 'object') {\n  return;\n}\n\n// Exit early if all IntersectionObserver and IntersectionObserverEntry\n// features are natively supported.\nif ('IntersectionObserver' in window &&\n    'IntersectionObserverEntry' in window &&\n    'intersectionRatio' in window.IntersectionObserverEntry.prototype) {\n\n  // Minimal polyfill for Edge 15's lack of `isIntersecting`\n  // See: https://github.com/w3c/IntersectionObserver/issues/211\n  if (!('isIntersecting' in window.IntersectionObserverEntry.prototype)) {\n    Object.defineProperty(window.IntersectionObserverEntry.prototype,\n      'isIntersecting', {\n      get: function () {\n        return this.intersectionRatio > 0;\n      }\n    });\n  }\n  return;\n}\n\n/**\n * Returns the embedding frame element, if any.\n * @param {!Document} doc\n * @return {!Element}\n */\nfunction getFrameElement(doc) {\n  try {\n    return doc.defaultView && doc.defaultView.frameElement || null;\n  } catch (e) {\n    // Ignore the error.\n    return null;\n  }\n}\n\n/**\n * A local reference to the root document.\n */\nvar document = (function(startDoc) {\n  var doc = startDoc;\n  var frame = getFrameElement(doc);\n  while (frame) {\n    doc = frame.ownerDocument;\n    frame = getFrameElement(doc);\n  }\n  return doc;\n})(window.document);\n\n/**\n * An IntersectionObserver registry. This registry exists to hold a strong\n * reference to IntersectionObserver instances currently observing a target\n * element. Without this registry, instances without another reference may be\n * garbage collected.\n */\nvar registry = [];\n\n/**\n * The signal updater for cross-origin intersection. When not null, it means\n * that the polyfill is configured to work in a cross-origin mode.\n * @type {function(DOMRect|ClientRect, DOMRect|ClientRect)}\n */\nvar crossOriginUpdater = null;\n\n/**\n * The current cross-origin intersection. Only used in the cross-origin mode.\n * @type {DOMRect|ClientRect}\n */\nvar crossOriginRect = null;\n\n\n/**\n * Creates the global IntersectionObserverEntry constructor.\n * https://w3c.github.io/IntersectionObserver/#intersection-observer-entry\n * @param {Object} entry A dictionary of instance properties.\n * @constructor\n */\nfunction IntersectionObserverEntry(entry) {\n  this.time = entry.time;\n  this.target = entry.target;\n  this.rootBounds = ensureDOMRect(entry.rootBounds);\n  this.boundingClientRect = ensureDOMRect(entry.boundingClientRect);\n  this.intersectionRect = ensureDOMRect(entry.intersectionRect || getEmptyRect());\n  this.isIntersecting = !!entry.intersectionRect;\n\n  // Calculates the intersection ratio.\n  var targetRect = this.boundingClientRect;\n  var targetArea = targetRect.width * targetRect.height;\n  var intersectionRect = this.intersectionRect;\n  var intersectionArea = intersectionRect.width * intersectionRect.height;\n\n  // Sets intersection ratio.\n  if (targetArea) {\n    // Round the intersection ratio to avoid floating point math issues:\n    // https://github.com/w3c/IntersectionObserver/issues/324\n    this.intersectionRatio = Number((intersectionArea / targetArea).toFixed(4));\n  } else {\n    // If area is zero and is intersecting, sets to 1, otherwise to 0\n    this.intersectionRatio = this.isIntersecting ? 1 : 0;\n  }\n}\n\n\n/**\n * Creates the global IntersectionObserver constructor.\n * https://w3c.github.io/IntersectionObserver/#intersection-observer-interface\n * @param {Function} callback The function to be invoked after intersection\n *     changes have queued. The function is not invoked if the queue has\n *     been emptied by calling the `takeRecords` method.\n * @param {Object=} opt_options Optional configuration options.\n * @constructor\n */\nfunction IntersectionObserver(callback, opt_options) {\n\n  var options = opt_options || {};\n\n  if (typeof callback != 'function') {\n    throw new Error('callback must be a function');\n  }\n\n  if (\n    options.root &&\n    options.root.nodeType != 1 &&\n    options.root.nodeType != 9\n  ) {\n    throw new Error('root must be a Document or Element');\n  }\n\n  // Binds and throttles `this._checkForIntersections`.\n  this._checkForIntersections = throttle(\n      this._checkForIntersections.bind(this), this.THROTTLE_TIMEOUT);\n\n  // Private properties.\n  this._callback = callback;\n  this._observationTargets = [];\n  this._queuedEntries = [];\n  this._rootMarginValues = this._parseRootMargin(options.rootMargin);\n\n  // Public properties.\n  this.thresholds = this._initThresholds(options.threshold);\n  this.root = options.root || null;\n  this.rootMargin = this._rootMarginValues.map(function(margin) {\n    return margin.value + margin.unit;\n  }).join(' ');\n\n  /** @private @const {!Array<!Document>} */\n  this._monitoringDocuments = [];\n  /** @private @const {!Array<function()>} */\n  this._monitoringUnsubscribes = [];\n}\n\n\n/**\n * The minimum interval within which the document will be checked for\n * intersection changes.\n */\nIntersectionObserver.prototype.THROTTLE_TIMEOUT = 100;\n\n\n/**\n * The frequency in which the polyfill polls for intersection changes.\n * this can be updated on a per instance basis and must be set prior to\n * calling `observe` on the first target.\n */\nIntersectionObserver.prototype.POLL_INTERVAL = null;\n\n/**\n * Use a mutation observer on the root element\n * to detect intersection changes.\n */\nIntersectionObserver.prototype.USE_MUTATION_OBSERVER = true;\n\n\n/**\n * Sets up the polyfill in the cross-origin mode. The result is the\n * updater function that accepts two arguments: `boundingClientRect` and\n * `intersectionRect` - just as these fields would be available to the\n * parent via `IntersectionObserverEntry`. This function should be called\n * each time the iframe receives intersection information from the parent\n * window, e.g. via messaging.\n * @return {function(DOMRect|ClientRect, DOMRect|ClientRect)}\n */\nIntersectionObserver._setupCrossOriginUpdater = function() {\n  if (!crossOriginUpdater) {\n    /**\n     * @param {DOMRect|ClientRect} boundingClientRect\n     * @param {DOMRect|ClientRect} intersectionRect\n     */\n    crossOriginUpdater = function(boundingClientRect, intersectionRect) {\n      if (!boundingClientRect || !intersectionRect) {\n        crossOriginRect = getEmptyRect();\n      } else {\n        crossOriginRect = convertFromParentRect(boundingClientRect, intersectionRect);\n      }\n      registry.forEach(function(observer) {\n        observer._checkForIntersections();\n      });\n    };\n  }\n  return crossOriginUpdater;\n};\n\n\n/**\n * Resets the cross-origin mode.\n */\nIntersectionObserver._resetCrossOriginUpdater = function() {\n  crossOriginUpdater = null;\n  crossOriginRect = null;\n};\n\n\n/**\n * Starts observing a target element for intersection changes based on\n * the thresholds values.\n * @param {Element} target The DOM element to observe.\n */\nIntersectionObserver.prototype.observe = function(target) {\n  var isTargetAlreadyObserved = this._observationTargets.some(function(item) {\n    return item.element == target;\n  });\n\n  if (isTargetAlreadyObserved) {\n    return;\n  }\n\n  if (!(target && target.nodeType == 1)) {\n    throw new Error('target must be an Element');\n  }\n\n  this._registerInstance();\n  this._observationTargets.push({element: target, entry: null});\n  this._monitorIntersections(target.ownerDocument);\n  this._checkForIntersections();\n};\n\n\n/**\n * Stops observing a target element for intersection changes.\n * @param {Element} target The DOM element to observe.\n */\nIntersectionObserver.prototype.unobserve = function(target) {\n  this._observationTargets =\n      this._observationTargets.filter(function(item) {\n        return item.element != target;\n      });\n  this._unmonitorIntersections(target.ownerDocument);\n  if (this._observationTargets.length == 0) {\n    this._unregisterInstance();\n  }\n};\n\n\n/**\n * Stops observing all target elements for intersection changes.\n */\nIntersectionObserver.prototype.disconnect = function() {\n  this._observationTargets = [];\n  this._unmonitorAllIntersections();\n  this._unregisterInstance();\n};\n\n\n/**\n * Returns any queue entries that have not yet been reported to the\n * callback and clears the queue. This can be used in conjunction with the\n * callback to obtain the absolute most up-to-date intersection information.\n * @return {Array} The currently queued entries.\n */\nIntersectionObserver.prototype.takeRecords = function() {\n  var records = this._queuedEntries.slice();\n  this._queuedEntries = [];\n  return records;\n};\n\n\n/**\n * Accepts the threshold value from the user configuration object and\n * returns a sorted array of unique threshold values. If a value is not\n * between 0 and 1 and error is thrown.\n * @private\n * @param {Array|number=} opt_threshold An optional threshold value or\n *     a list of threshold values, defaulting to [0].\n * @return {Array} A sorted list of unique and valid threshold values.\n */\nIntersectionObserver.prototype._initThresholds = function(opt_threshold) {\n  var threshold = opt_threshold || [0];\n  if (!Array.isArray(threshold)) threshold = [threshold];\n\n  return threshold.sort().filter(function(t, i, a) {\n    if (typeof t != 'number' || isNaN(t) || t < 0 || t > 1) {\n      throw new Error('threshold must be a number between 0 and 1 inclusively');\n    }\n    return t !== a[i - 1];\n  });\n};\n\n\n/**\n * Accepts the rootMargin value from the user configuration object\n * and returns an array of the four margin values as an object containing\n * the value and unit properties. If any of the values are not properly\n * formatted or use a unit other than px or %, and error is thrown.\n * @private\n * @param {string=} opt_rootMargin An optional rootMargin value,\n *     defaulting to '0px'.\n * @return {Array<Object>} An array of margin objects with the keys\n *     value and unit.\n */\nIntersectionObserver.prototype._parseRootMargin = function(opt_rootMargin) {\n  var marginString = opt_rootMargin || '0px';\n  var margins = marginString.split(/\\s+/).map(function(margin) {\n    var parts = /^(-?\\d*\\.?\\d+)(px|%)$/.exec(margin);\n    if (!parts) {\n      throw new Error('rootMargin must be specified in pixels or percent');\n    }\n    return {value: parseFloat(parts[1]), unit: parts[2]};\n  });\n\n  // Handles shorthand.\n  margins[1] = margins[1] || margins[0];\n  margins[2] = margins[2] || margins[0];\n  margins[3] = margins[3] || margins[1];\n\n  return margins;\n};\n\n\n/**\n * Starts polling for intersection changes if the polling is not already\n * happening, and if the page's visibility state is visible.\n * @param {!Document} doc\n * @private\n */\nIntersectionObserver.prototype._monitorIntersections = function(doc) {\n  var win = doc.defaultView;\n  if (!win) {\n    // Already destroyed.\n    return;\n  }\n  if (this._monitoringDocuments.indexOf(doc) != -1) {\n    // Already monitoring.\n    return;\n  }\n\n  // Private state for monitoring.\n  var callback = this._checkForIntersections;\n  var monitoringInterval = null;\n  var domObserver = null;\n\n  // If a poll interval is set, use polling instead of listening to\n  // resize and scroll events or DOM mutations.\n  if (this.POLL_INTERVAL) {\n    monitoringInterval = win.setInterval(callback, this.POLL_INTERVAL);\n  } else {\n    addEvent(win, 'resize', callback, true);\n    addEvent(doc, 'scroll', callback, true);\n    if (this.USE_MUTATION_OBSERVER && 'MutationObserver' in win) {\n      domObserver = new win.MutationObserver(callback);\n      domObserver.observe(doc, {\n        attributes: true,\n        childList: true,\n        characterData: true,\n        subtree: true\n      });\n    }\n  }\n\n  this._monitoringDocuments.push(doc);\n  this._monitoringUnsubscribes.push(function() {\n    // Get the window object again. When a friendly iframe is destroyed, it\n    // will be null.\n    var win = doc.defaultView;\n\n    if (win) {\n      if (monitoringInterval) {\n        win.clearInterval(monitoringInterval);\n      }\n      removeEvent(win, 'resize', callback, true);\n    }\n\n    removeEvent(doc, 'scroll', callback, true);\n    if (domObserver) {\n      domObserver.disconnect();\n    }\n  });\n\n  // Also monitor the parent.\n  var rootDoc =\n    (this.root && (this.root.ownerDocument || this.root)) || document;\n  if (doc != rootDoc) {\n    var frame = getFrameElement(doc);\n    if (frame) {\n      this._monitorIntersections(frame.ownerDocument);\n    }\n  }\n};\n\n\n/**\n * Stops polling for intersection changes.\n * @param {!Document} doc\n * @private\n */\nIntersectionObserver.prototype._unmonitorIntersections = function(doc) {\n  var index = this._monitoringDocuments.indexOf(doc);\n  if (index == -1) {\n    return;\n  }\n\n  var rootDoc =\n    (this.root && (this.root.ownerDocument || this.root)) || document;\n\n  // Check if any dependent targets are still remaining.\n  var hasDependentTargets =\n      this._observationTargets.some(function(item) {\n        var itemDoc = item.element.ownerDocument;\n        // Target is in this context.\n        if (itemDoc == doc) {\n          return true;\n        }\n        // Target is nested in this context.\n        while (itemDoc && itemDoc != rootDoc) {\n          var frame = getFrameElement(itemDoc);\n          itemDoc = frame && frame.ownerDocument;\n          if (itemDoc == doc) {\n            return true;\n          }\n        }\n        return false;\n      });\n  if (hasDependentTargets) {\n    return;\n  }\n\n  // Unsubscribe.\n  var unsubscribe = this._monitoringUnsubscribes[index];\n  this._monitoringDocuments.splice(index, 1);\n  this._monitoringUnsubscribes.splice(index, 1);\n  unsubscribe();\n\n  // Also unmonitor the parent.\n  if (doc != rootDoc) {\n    var frame = getFrameElement(doc);\n    if (frame) {\n      this._unmonitorIntersections(frame.ownerDocument);\n    }\n  }\n};\n\n\n/**\n * Stops polling for intersection changes.\n * @param {!Document} doc\n * @private\n */\nIntersectionObserver.prototype._unmonitorAllIntersections = function() {\n  var unsubscribes = this._monitoringUnsubscribes.slice(0);\n  this._monitoringDocuments.length = 0;\n  this._monitoringUnsubscribes.length = 0;\n  for (var i = 0; i < unsubscribes.length; i++) {\n    unsubscribes[i]();\n  }\n};\n\n\n/**\n * Scans each observation target for intersection changes and adds them\n * to the internal entries queue. If new entries are found, it\n * schedules the callback to be invoked.\n * @private\n */\nIntersectionObserver.prototype._checkForIntersections = function() {\n  if (!this.root && crossOriginUpdater && !crossOriginRect) {\n    // Cross origin monitoring, but no initial data available yet.\n    return;\n  }\n\n  var rootIsInDom = this._rootIsInDom();\n  var rootRect = rootIsInDom ? this._getRootRect() : getEmptyRect();\n\n  this._observationTargets.forEach(function(item) {\n    var target = item.element;\n    var targetRect = getBoundingClientRect(target);\n    var rootContainsTarget = this._rootContainsTarget(target);\n    var oldEntry = item.entry;\n    var intersectionRect = rootIsInDom && rootContainsTarget &&\n        this._computeTargetAndRootIntersection(target, targetRect, rootRect);\n\n    var rootBounds = null;\n    if (!this._rootContainsTarget(target)) {\n      rootBounds = getEmptyRect();\n    } else if (!crossOriginUpdater || this.root) {\n      rootBounds = rootRect;\n    }\n\n    var newEntry = item.entry = new IntersectionObserverEntry({\n      time: now(),\n      target: target,\n      boundingClientRect: targetRect,\n      rootBounds: rootBounds,\n      intersectionRect: intersectionRect\n    });\n\n    if (!oldEntry) {\n      this._queuedEntries.push(newEntry);\n    } else if (rootIsInDom && rootContainsTarget) {\n      // If the new entry intersection ratio has crossed any of the\n      // thresholds, add a new entry.\n      if (this._hasCrossedThreshold(oldEntry, newEntry)) {\n        this._queuedEntries.push(newEntry);\n      }\n    } else {\n      // If the root is not in the DOM or target is not contained within\n      // root but the previous entry for this target had an intersection,\n      // add a new record indicating removal.\n      if (oldEntry && oldEntry.isIntersecting) {\n        this._queuedEntries.push(newEntry);\n      }\n    }\n  }, this);\n\n  if (this._queuedEntries.length) {\n    this._callback(this.takeRecords(), this);\n  }\n};\n\n\n/**\n * Accepts a target and root rect computes the intersection between then\n * following the algorithm in the spec.\n * TODO(philipwalton): at this time clip-path is not considered.\n * https://w3c.github.io/IntersectionObserver/#calculate-intersection-rect-algo\n * @param {Element} target The target DOM element\n * @param {Object} targetRect The bounding rect of the target.\n * @param {Object} rootRect The bounding rect of the root after being\n *     expanded by the rootMargin value.\n * @return {?Object} The final intersection rect object or undefined if no\n *     intersection is found.\n * @private\n */\nIntersectionObserver.prototype._computeTargetAndRootIntersection =\n    function(target, targetRect, rootRect) {\n  // If the element isn't displayed, an intersection can't happen.\n  if (window.getComputedStyle(target).display == 'none') return;\n\n  var intersectionRect = targetRect;\n  var parent = getParentNode(target);\n  var atRoot = false;\n\n  while (!atRoot && parent) {\n    var parentRect = null;\n    var parentComputedStyle = parent.nodeType == 1 ?\n        window.getComputedStyle(parent) : {};\n\n    // If the parent isn't displayed, an intersection can't happen.\n    if (parentComputedStyle.display == 'none') return null;\n\n    if (parent == this.root || parent.nodeType == /* DOCUMENT */ 9) {\n      atRoot = true;\n      if (parent == this.root || parent == document) {\n        if (crossOriginUpdater && !this.root) {\n          if (!crossOriginRect ||\n              crossOriginRect.width == 0 && crossOriginRect.height == 0) {\n            // A 0-size cross-origin intersection means no-intersection.\n            parent = null;\n            parentRect = null;\n            intersectionRect = null;\n          } else {\n            parentRect = crossOriginRect;\n          }\n        } else {\n          parentRect = rootRect;\n        }\n      } else {\n        // Check if there's a frame that can be navigated to.\n        var frame = getParentNode(parent);\n        var frameRect = frame && getBoundingClientRect(frame);\n        var frameIntersect =\n            frame &&\n            this._computeTargetAndRootIntersection(frame, frameRect, rootRect);\n        if (frameRect && frameIntersect) {\n          parent = frame;\n          parentRect = convertFromParentRect(frameRect, frameIntersect);\n        } else {\n          parent = null;\n          intersectionRect = null;\n        }\n      }\n    } else {\n      // If the element has a non-visible overflow, and it's not the <body>\n      // or <html> element, update the intersection rect.\n      // Note: <body> and <html> cannot be clipped to a rect that's not also\n      // the document rect, so no need to compute a new intersection.\n      var doc = parent.ownerDocument;\n      if (parent != doc.body &&\n          parent != doc.documentElement &&\n          parentComputedStyle.overflow != 'visible') {\n        parentRect = getBoundingClientRect(parent);\n      }\n    }\n\n    // If either of the above conditionals set a new parentRect,\n    // calculate new intersection data.\n    if (parentRect) {\n      intersectionRect = computeRectIntersection(parentRect, intersectionRect);\n    }\n    if (!intersectionRect) break;\n    parent = parent && getParentNode(parent);\n  }\n  return intersectionRect;\n};\n\n\n/**\n * Returns the root rect after being expanded by the rootMargin value.\n * @return {ClientRect} The expanded root rect.\n * @private\n */\nIntersectionObserver.prototype._getRootRect = function() {\n  var rootRect;\n  if (this.root && !isDoc(this.root)) {\n    rootRect = getBoundingClientRect(this.root);\n  } else {\n    // Use <html>/<body> instead of window since scroll bars affect size.\n    var doc = isDoc(this.root) ? this.root : document;\n    var html = doc.documentElement;\n    var body = doc.body;\n    rootRect = {\n      top: 0,\n      left: 0,\n      right: html.clientWidth || body.clientWidth,\n      width: html.clientWidth || body.clientWidth,\n      bottom: html.clientHeight || body.clientHeight,\n      height: html.clientHeight || body.clientHeight\n    };\n  }\n  return this._expandRectByRootMargin(rootRect);\n};\n\n\n/**\n * Accepts a rect and expands it by the rootMargin value.\n * @param {DOMRect|ClientRect} rect The rect object to expand.\n * @return {ClientRect} The expanded rect.\n * @private\n */\nIntersectionObserver.prototype._expandRectByRootMargin = function(rect) {\n  var margins = this._rootMarginValues.map(function(margin, i) {\n    return margin.unit == 'px' ? margin.value :\n        margin.value * (i % 2 ? rect.width : rect.height) / 100;\n  });\n  var newRect = {\n    top: rect.top - margins[0],\n    right: rect.right + margins[1],\n    bottom: rect.bottom + margins[2],\n    left: rect.left - margins[3]\n  };\n  newRect.width = newRect.right - newRect.left;\n  newRect.height = newRect.bottom - newRect.top;\n\n  return newRect;\n};\n\n\n/**\n * Accepts an old and new entry and returns true if at least one of the\n * threshold values has been crossed.\n * @param {?IntersectionObserverEntry} oldEntry The previous entry for a\n *    particular target element or null if no previous entry exists.\n * @param {IntersectionObserverEntry} newEntry The current entry for a\n *    particular target element.\n * @return {boolean} Returns true if a any threshold has been crossed.\n * @private\n */\nIntersectionObserver.prototype._hasCrossedThreshold =\n    function(oldEntry, newEntry) {\n\n  // To make comparing easier, an entry that has a ratio of 0\n  // but does not actually intersect is given a value of -1\n  var oldRatio = oldEntry && oldEntry.isIntersecting ?\n      oldEntry.intersectionRatio || 0 : -1;\n  var newRatio = newEntry.isIntersecting ?\n      newEntry.intersectionRatio || 0 : -1;\n\n  // Ignore unchanged ratios\n  if (oldRatio === newRatio) return;\n\n  for (var i = 0; i < this.thresholds.length; i++) {\n    var threshold = this.thresholds[i];\n\n    // Return true if an entry matches a threshold or if the new ratio\n    // and the old ratio are on the opposite sides of a threshold.\n    if (threshold == oldRatio || threshold == newRatio ||\n        threshold < oldRatio !== threshold < newRatio) {\n      return true;\n    }\n  }\n};\n\n\n/**\n * Returns whether or not the root element is an element and is in the DOM.\n * @return {boolean} True if the root element is an element and is in the DOM.\n * @private\n */\nIntersectionObserver.prototype._rootIsInDom = function() {\n  return !this.root || containsDeep(document, this.root);\n};\n\n\n/**\n * Returns whether or not the target element is a child of root.\n * @param {Element} target The target element to check.\n * @return {boolean} True if the target element is a child of root.\n * @private\n */\nIntersectionObserver.prototype._rootContainsTarget = function(target) {\n  var rootDoc =\n    (this.root && (this.root.ownerDocument || this.root)) || document;\n  return (\n    containsDeep(rootDoc, target) &&\n    (!this.root || rootDoc == target.ownerDocument)\n  );\n};\n\n\n/**\n * Adds the instance to the global IntersectionObserver registry if it isn't\n * already present.\n * @private\n */\nIntersectionObserver.prototype._registerInstance = function() {\n  if (registry.indexOf(this) < 0) {\n    registry.push(this);\n  }\n};\n\n\n/**\n * Removes the instance from the global IntersectionObserver registry.\n * @private\n */\nIntersectionObserver.prototype._unregisterInstance = function() {\n  var index = registry.indexOf(this);\n  if (index != -1) registry.splice(index, 1);\n};\n\n\n/**\n * Returns the result of the performance.now() method or null in browsers\n * that don't support the API.\n * @return {number} The elapsed time since the page was requested.\n */\nfunction now() {\n  return window.performance && performance.now && performance.now();\n}\n\n\n/**\n * Throttles a function and delays its execution, so it's only called at most\n * once within a given time period.\n * @param {Function} fn The function to throttle.\n * @param {number} timeout The amount of time that must pass before the\n *     function can be called again.\n * @return {Function} The throttled function.\n */\nfunction throttle(fn, timeout) {\n  var timer = null;\n  return function () {\n    if (!timer) {\n      timer = setTimeout(function() {\n        fn();\n        timer = null;\n      }, timeout);\n    }\n  };\n}\n\n\n/**\n * Adds an event handler to a DOM node ensuring cross-browser compatibility.\n * @param {Node} node The DOM node to add the event handler to.\n * @param {string} event The event name.\n * @param {Function} fn The event handler to add.\n * @param {boolean} opt_useCapture Optionally adds the even to the capture\n *     phase. Note: this only works in modern browsers.\n */\nfunction addEvent(node, event, fn, opt_useCapture) {\n  if (typeof node.addEventListener == 'function') {\n    node.addEventListener(event, fn, opt_useCapture || false);\n  }\n  else if (typeof node.attachEvent == 'function') {\n    node.attachEvent('on' + event, fn);\n  }\n}\n\n\n/**\n * Removes a previously added event handler from a DOM node.\n * @param {Node} node The DOM node to remove the event handler from.\n * @param {string} event The event name.\n * @param {Function} fn The event handler to remove.\n * @param {boolean} opt_useCapture If the event handler was added with this\n *     flag set to true, it should be set to true here in order to remove it.\n */\nfunction removeEvent(node, event, fn, opt_useCapture) {\n  if (typeof node.removeEventListener == 'function') {\n    node.removeEventListener(event, fn, opt_useCapture || false);\n  }\n  else if (typeof node.detatchEvent == 'function') {\n    node.detatchEvent('on' + event, fn);\n  }\n}\n\n\n/**\n * Returns the intersection between two rect objects.\n * @param {Object} rect1 The first rect.\n * @param {Object} rect2 The second rect.\n * @return {?Object|?ClientRect} The intersection rect or undefined if no\n *     intersection is found.\n */\nfunction computeRectIntersection(rect1, rect2) {\n  var top = Math.max(rect1.top, rect2.top);\n  var bottom = Math.min(rect1.bottom, rect2.bottom);\n  var left = Math.max(rect1.left, rect2.left);\n  var right = Math.min(rect1.right, rect2.right);\n  var width = right - left;\n  var height = bottom - top;\n\n  return (width >= 0 && height >= 0) && {\n    top: top,\n    bottom: bottom,\n    left: left,\n    right: right,\n    width: width,\n    height: height\n  } || null;\n}\n\n\n/**\n * Shims the native getBoundingClientRect for compatibility with older IE.\n * @param {Element} el The element whose bounding rect to get.\n * @return {DOMRect|ClientRect} The (possibly shimmed) rect of the element.\n */\nfunction getBoundingClientRect(el) {\n  var rect;\n\n  try {\n    rect = el.getBoundingClientRect();\n  } catch (err) {\n    // Ignore Windows 7 IE11 \"Unspecified error\"\n    // https://github.com/w3c/IntersectionObserver/pull/205\n  }\n\n  if (!rect) return getEmptyRect();\n\n  // Older IE\n  if (!(rect.width && rect.height)) {\n    rect = {\n      top: rect.top,\n      right: rect.right,\n      bottom: rect.bottom,\n      left: rect.left,\n      width: rect.right - rect.left,\n      height: rect.bottom - rect.top\n    };\n  }\n  return rect;\n}\n\n\n/**\n * Returns an empty rect object. An empty rect is returned when an element\n * is not in the DOM.\n * @return {ClientRect} The empty rect.\n */\nfunction getEmptyRect() {\n  return {\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    width: 0,\n    height: 0\n  };\n}\n\n\n/**\n * Ensure that the result has all of the necessary fields of the DOMRect.\n * Specifically this ensures that `x` and `y` fields are set.\n *\n * @param {?DOMRect|?ClientRect} rect\n * @return {?DOMRect}\n */\nfunction ensureDOMRect(rect) {\n  // A `DOMRect` object has `x` and `y` fields.\n  if (!rect || 'x' in rect) {\n    return rect;\n  }\n  // A IE's `ClientRect` type does not have `x` and `y`. The same is the case\n  // for internally calculated Rect objects. For the purposes of\n  // `IntersectionObserver`, it's sufficient to simply mirror `left` and `top`\n  // for these fields.\n  return {\n    top: rect.top,\n    y: rect.top,\n    bottom: rect.bottom,\n    left: rect.left,\n    x: rect.left,\n    right: rect.right,\n    width: rect.width,\n    height: rect.height\n  };\n}\n\n\n/**\n * Inverts the intersection and bounding rect from the parent (frame) BCR to\n * the local BCR space.\n * @param {DOMRect|ClientRect} parentBoundingRect The parent's bound client rect.\n * @param {DOMRect|ClientRect} parentIntersectionRect The parent's own intersection rect.\n * @return {ClientRect} The local root bounding rect for the parent's children.\n */\nfunction convertFromParentRect(parentBoundingRect, parentIntersectionRect) {\n  var top = parentIntersectionRect.top - parentBoundingRect.top;\n  var left = parentIntersectionRect.left - parentBoundingRect.left;\n  return {\n    top: top,\n    left: left,\n    height: parentIntersectionRect.height,\n    width: parentIntersectionRect.width,\n    bottom: top + parentIntersectionRect.height,\n    right: left + parentIntersectionRect.width\n  };\n}\n\n\n/**\n * Checks to see if a parent element contains a child element (including inside\n * shadow DOM).\n * @param {Node} parent The parent element.\n * @param {Node} child The child element.\n * @return {boolean} True if the parent node contains the child node.\n */\nfunction containsDeep(parent, child) {\n  var node = child;\n  while (node) {\n    if (node == parent) return true;\n\n    node = getParentNode(node);\n  }\n  return false;\n}\n\n\n/**\n * Gets the parent node of an element or its host element if the parent node\n * is a shadow root.\n * @param {Node} node The node whose parent to get.\n * @return {Node|null} The parent node or null if no parent exists.\n */\nfunction getParentNode(node) {\n  var parent = node.parentNode;\n\n  if (node.nodeType == /* DOCUMENT */ 9 && node != document) {\n    // If this node is a document node, look for the embedding frame.\n    return getFrameElement(node);\n  }\n\n  // If the parent has element that is assigned through shadow root slot\n  if (parent && parent.assignedSlot) {\n    parent = parent.assignedSlot.parentNode\n  }\n\n  if (parent && parent.nodeType == 11 && parent.host) {\n    // If the parent is a shadow root, return the host element.\n    return parent.host;\n  }\n\n  return parent;\n}\n\n/**\n * Returns true if `node` is a Document.\n * @param {!Node} node\n * @returns {boolean}\n */\nfunction isDoc(node) {\n  return node && node.nodeType === 9;\n}\n\n\n// Exposes the constructors globally.\nwindow.IntersectionObserver = IntersectionObserver;\nwindow.IntersectionObserverEntry = IntersectionObserverEntry;\n\n}());\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.scrollama = factory());\n}(this, (function () { 'use strict';\n\n// DOM helper functions\n\n// public\nfunction selectAll(selector, parent) {\n  if ( parent === void 0 ) parent = document;\n\n  if (typeof selector === 'string') {\n    return Array.from(parent.querySelectorAll(selector));\n  } else if (selector instanceof Element) {\n    return [selector];\n  } else if (selector instanceof NodeList) {\n    return Array.from(selector);\n  } else if (selector instanceof Array) {\n    return selector;\n  }\n  return [];\n}\n\nfunction getOffsetId(id) {\n  return (\"scrollama__debug-offset--\" + id);\n}\n\n// SETUP\nfunction setupOffset(ref) {\n  var id = ref.id;\n  var offsetVal = ref.offsetVal;\n  var stepClass = ref.stepClass;\n\n  var el = document.createElement(\"div\");\n  el.id = getOffsetId(id);\n  el.className = \"scrollama__debug-offset\";\n  el.style.position = \"fixed\";\n  el.style.left = \"0\";\n  el.style.width = \"100%\";\n  el.style.height = \"0\";\n  el.style.borderTop = \"2px dashed black\";\n  el.style.zIndex = \"9999\";\n\n  var p = document.createElement(\"p\");\n  p.innerHTML = \"\\\".\" + stepClass + \"\\\" trigger: <span>\" + offsetVal + \"</span>\";\n  p.style.fontSize = \"12px\";\n  p.style.fontFamily = \"monospace\";\n  p.style.color = \"black\";\n  p.style.margin = \"0\";\n  p.style.padding = \"6px\";\n  el.appendChild(p);\n  document.body.appendChild(el);\n}\n\nfunction setup(ref) {\n  var id = ref.id;\n  var offsetVal = ref.offsetVal;\n  var stepEl = ref.stepEl;\n\n  var stepClass = stepEl[0].className;\n  setupOffset({ id: id, offsetVal: offsetVal, stepClass: stepClass });\n}\n\n// UPDATE\nfunction update(ref) {\n  var id = ref.id;\n  var offsetMargin = ref.offsetMargin;\n  var offsetVal = ref.offsetVal;\n  var format = ref.format;\n\n  var post = format === \"pixels\" ? \"px\" : \"\";\n  var idVal = getOffsetId(id);\n  var el = document.getElementById(idVal);\n  el.style.top = offsetMargin + \"px\";\n  el.querySelector(\"span\").innerText = \"\" + offsetVal + post;\n}\n\nfunction notifyStep(ref) {\n  var id = ref.id;\n  var index = ref.index;\n  var state = ref.state;\n\n  var prefix = \"scrollama__debug-step--\" + id + \"-\" + index;\n  var elA = document.getElementById((prefix + \"_above\"));\n  var elB = document.getElementById((prefix + \"_below\"));\n  var display = state === \"enter\" ? \"block\" : \"none\";\n\n  if (elA) { elA.style.display = display; }\n  if (elB) { elB.style.display = display; }\n}\n\nfunction scrollama() {\n  var OBSERVER_NAMES = [\n    \"stepAbove\",\n    \"stepBelow\",\n    \"stepProgress\",\n    \"viewportAbove\",\n    \"viewportBelow\"\n  ];\n\n  var cb = {};\n  var io = {};\n\n  var id = null;\n  var stepEl = [];\n  var stepOffsetHeight = [];\n  var stepOffsetTop = [];\n  var stepStates = [];\n\n  var offsetVal = 0;\n  var offsetMargin = 0;\n  var viewH = 0;\n  var pageH = 0;\n  var previousYOffset = 0;\n  var progressThreshold = 0;\n\n  var isReady = false;\n  var isEnabled = false;\n  var isDebug = false;\n\n  var progressMode = false;\n  var preserveOrder = false;\n  var triggerOnce = false;\n\n  var direction = \"down\";\n  var format = \"percent\";\n\n  var exclude = [];\n\n  /* HELPERS */\n  function err(msg) {\n    console.error((\"scrollama error: \" + msg));\n  }\n\n  function reset() {\n    cb = {\n      stepEnter: function () {},\n      stepExit: function () {},\n      stepProgress: function () {}\n    };\n    io = {};\n  }\n\n  function generateInstanceID() {\n    var a = \"abcdefghijklmnopqrstuv\";\n    var l = a.length;\n    var t = Date.now();\n    var r = [0, 0, 0].map(function (d) { return a[Math.floor(Math.random() * l)]; }).join(\"\");\n    return (\"\" + r + t);\n  }\n\n  function getOffsetTop(el) {\n    var ref = el.getBoundingClientRect();\n    var top = ref.top;\n    var scrollTop = window.pageYOffset;\n    var clientTop = document.body.clientTop || 0;\n    return top + scrollTop - clientTop;\n  }\n\n  function getPageHeight() {\n    var body = document.body;\n    var html = document.documentElement;\n\n    return Math.max(\n      body.scrollHeight,\n      body.offsetHeight,\n      html.clientHeight,\n      html.scrollHeight,\n      html.offsetHeight\n    );\n  }\n\n  function getIndex(element) {\n    return +element.getAttribute(\"data-scrollama-index\");\n  }\n\n  function updateDirection() {\n    if (window.pageYOffset > previousYOffset) { direction = \"down\"; }\n    else if (window.pageYOffset < previousYOffset) { direction = \"up\"; }\n    previousYOffset = window.pageYOffset;\n  }\n\n  function disconnectObserver(name) {\n    if (io[name]) { io[name].forEach(function (d) { return d.disconnect(); }); }\n  }\n\n  function handleResize() {\n    viewH = window.innerHeight;\n    pageH = getPageHeight();\n\n    var mult = format === \"pixels\" ? 1 : viewH;\n    offsetMargin = offsetVal * mult;\n\n    if (isReady) {\n      stepOffsetHeight = stepEl.map(function (el) { return el.getBoundingClientRect().height; });\n      stepOffsetTop = stepEl.map(getOffsetTop);\n      if (isEnabled) { updateIO(); }\n    }\n\n    if (isDebug) { update({ id: id, offsetMargin: offsetMargin, offsetVal: offsetVal, format: format }); }\n  }\n\n  function handleEnable(enable) {\n    if (enable && !isEnabled) {\n      // enable a disabled scroller\n      if (isReady) {\n        // enable a ready scroller\n        updateIO();\n      } else {\n        // can't enable an unready scroller\n        err(\"scrollama error: enable() called before scroller was ready\");\n        isEnabled = false;\n        return; // all is not well, don't set the requested state\n      }\n    }\n    if (!enable && isEnabled) {\n      // disable an enabled scroller\n      OBSERVER_NAMES.forEach(disconnectObserver);\n    }\n    isEnabled = enable; // all is well, set requested state\n  }\n\n  function createThreshold(height) {\n    var count = Math.ceil(height / progressThreshold);\n    var t = [];\n    var ratio = 1 / count;\n    for (var i = 0; i < count; i += 1) {\n      t.push(i * ratio);\n    }\n    return t;\n  }\n\n  /* NOTIFY CALLBACKS */\n  function notifyStepProgress(element, progress) {\n    var index = getIndex(element);\n    if (progress !== undefined) { stepStates[index].progress = progress; }\n    var resp = { element: element, index: index, progress: stepStates[index].progress };\n\n    if (stepStates[index].state === \"enter\") { cb.stepProgress(resp); }\n  }\n\n  function notifyOthers(index, location) {\n    if (location === \"above\") {\n      // check if steps above/below were skipped and should be notified first\n      for (var i = 0; i < index; i += 1) {\n        var ss = stepStates[i];\n        if (ss.state !== \"enter\" && ss.direction !== \"down\") {\n          notifyStepEnter(stepEl[i], \"down\", false);\n          notifyStepExit(stepEl[i], \"down\");\n        } else if (ss.state === \"enter\") { notifyStepExit(stepEl[i], \"down\"); }\n        // else if (ss.direction === 'up') {\n        //   notifyStepEnter(stepEl[i], 'down', false);\n        //   notifyStepExit(stepEl[i], 'down');\n        // }\n      }\n    } else if (location === \"below\") {\n      for (var i$1 = stepStates.length - 1; i$1 > index; i$1 -= 1) {\n        var ss$1 = stepStates[i$1];\n        if (ss$1.state === \"enter\") {\n          notifyStepExit(stepEl[i$1], \"up\");\n        }\n        if (ss$1.direction === \"down\") {\n          notifyStepEnter(stepEl[i$1], \"up\", false);\n          notifyStepExit(stepEl[i$1], \"up\");\n        }\n      }\n    }\n  }\n\n  function notifyStepEnter(element, dir, check) {\n    if ( check === void 0 ) check = true;\n\n    var index = getIndex(element);\n    var resp = { element: element, index: index, direction: dir };\n\n    // store most recent trigger\n    stepStates[index].direction = dir;\n    stepStates[index].state = \"enter\";\n    if (preserveOrder && check && dir === \"down\") { notifyOthers(index, \"above\"); }\n\n    if (preserveOrder && check && dir === \"up\") { notifyOthers(index, \"below\"); }\n\n    if (cb.stepEnter && !exclude[index]) {\n      cb.stepEnter(resp, stepStates);\n      if (isDebug) { notifyStep({ id: id, index: index, state: \"enter\" }); }\n      if (triggerOnce) { exclude[index] = true; }\n    }\n\n    if (progressMode) { notifyStepProgress(element); }\n  }\n\n  function notifyStepExit(element, dir) {\n    var index = getIndex(element);\n    var resp = { element: element, index: index, direction: dir };\n\n    if (progressMode) {\n      if (dir === \"down\" && stepStates[index].progress < 1)\n        { notifyStepProgress(element, 1); }\n      else if (dir === \"up\" && stepStates[index].progress > 0)\n        { notifyStepProgress(element, 0); }\n    }\n\n    // store most recent trigger\n    stepStates[index].direction = dir;\n    stepStates[index].state = \"exit\";\n\n    cb.stepExit(resp, stepStates);\n    if (isDebug) { notifyStep({ id: id, index: index, state: \"exit\" }); }\n  }\n\n  /* OBSERVER - INTERSECT HANDLING */\n  // this is good for entering while scrolling down + leaving while scrolling up\n  function intersectStepAbove(ref) {\n    var entry = ref[0];\n\n    updateDirection();\n    var isIntersecting = entry.isIntersecting;\n    var boundingClientRect = entry.boundingClientRect;\n    var target = entry.target;\n\n    // bottom = bottom edge of element from top of viewport\n    // bottomAdjusted = bottom edge of element from trigger\n    var top = boundingClientRect.top;\n    var bottom = boundingClientRect.bottom;\n    var topAdjusted = top - offsetMargin;\n    var bottomAdjusted = bottom - offsetMargin;\n    var index = getIndex(target);\n    var ss = stepStates[index];\n\n    // entering above is only when topAdjusted is negative\n    // and bottomAdjusted is positive\n    if (\n      isIntersecting &&\n      topAdjusted <= 0 &&\n      bottomAdjusted >= 0 &&\n      direction === \"down\" &&\n      ss.state !== \"enter\"\n    )\n      { notifyStepEnter(target, direction); }\n\n    // exiting from above is when topAdjusted is positive and not intersecting\n    if (\n      !isIntersecting &&\n      topAdjusted > 0 &&\n      direction === \"up\" &&\n      ss.state === \"enter\"\n    )\n      { notifyStepExit(target, direction); }\n  }\n\n  // this is good for entering while scrolling up + leaving while scrolling down\n  function intersectStepBelow(ref) {\n    var entry = ref[0];\n\n    updateDirection();\n    var isIntersecting = entry.isIntersecting;\n    var boundingClientRect = entry.boundingClientRect;\n    var target = entry.target;\n\n    // bottom = bottom edge of element from top of viewport\n    // bottomAdjusted = bottom edge of element from trigger\n    var top = boundingClientRect.top;\n    var bottom = boundingClientRect.bottom;\n    var topAdjusted = top - offsetMargin;\n    var bottomAdjusted = bottom - offsetMargin;\n    var index = getIndex(target);\n    var ss = stepStates[index];\n\n    // entering below is only when bottomAdjusted is positive\n    // and topAdjusted is negative\n    if (\n      isIntersecting &&\n      topAdjusted <= 0 &&\n      bottomAdjusted >= 0 &&\n      direction === \"up\" &&\n      ss.state !== \"enter\"\n    )\n      { notifyStepEnter(target, direction); }\n\n    // exiting from above is when bottomAdjusted is negative and not intersecting\n    if (\n      !isIntersecting &&\n      bottomAdjusted < 0 &&\n      direction === \"down\" &&\n      ss.state === \"enter\"\n    )\n      { notifyStepExit(target, direction); }\n  }\n\n  /*\n\tif there is a scroll event where a step never intersects (therefore\n\tskipping an enter/exit trigger), use this fallback to detect if it is\n\tin view\n\t*/\n  function intersectViewportAbove(ref) {\n    var entry = ref[0];\n\n    updateDirection();\n    var isIntersecting = entry.isIntersecting;\n    var target = entry.target;\n    var index = getIndex(target);\n    var ss = stepStates[index];\n\n    if (\n      isIntersecting &&\n      direction === \"down\" &&\n      ss.direction !== \"down\" &&\n      ss.state !== \"enter\"\n    ) {\n      notifyStepEnter(target, \"down\");\n      notifyStepExit(target, \"down\");\n    }\n  }\n\n  function intersectViewportBelow(ref) {\n    var entry = ref[0];\n\n    updateDirection();\n    var isIntersecting = entry.isIntersecting;\n    var target = entry.target;\n    var index = getIndex(target);\n    var ss = stepStates[index];\n    if (\n      isIntersecting &&\n      direction === \"up\" &&\n      ss.direction === \"down\" &&\n      ss.state !== \"enter\"\n    ) {\n      notifyStepEnter(target, \"up\");\n      notifyStepExit(target, \"up\");\n    }\n  }\n\n  function intersectStepProgress(ref) {\n    var entry = ref[0];\n\n    updateDirection();\n    var isIntersecting = entry.isIntersecting;\n    var intersectionRatio = entry.intersectionRatio;\n    var boundingClientRect = entry.boundingClientRect;\n    var target = entry.target;\n    var bottom = boundingClientRect.bottom;\n    var bottomAdjusted = bottom - offsetMargin;\n    if (isIntersecting && bottomAdjusted >= 0) {\n      notifyStepProgress(target, +intersectionRatio);\n    }\n  }\n\n  /*  OBSERVER - CREATION */\n  // jump into viewport\n  function updateViewportAboveIO() {\n    io.viewportAbove = stepEl.map(function (el, i) {\n      var marginTop = pageH - stepOffsetTop[i];\n      var marginBottom = offsetMargin - viewH - stepOffsetHeight[i];\n      var rootMargin = marginTop + \"px 0px \" + marginBottom + \"px 0px\";\n      var options = { rootMargin: rootMargin };\n      // console.log(options);\n      var obs = new IntersectionObserver(intersectViewportAbove, options);\n      obs.observe(el);\n      return obs;\n    });\n  }\n\n  function updateViewportBelowIO() {\n    io.viewportBelow = stepEl.map(function (el, i) {\n      var marginTop = -offsetMargin - stepOffsetHeight[i];\n      var marginBottom = offsetMargin - viewH + stepOffsetHeight[i] + pageH;\n      var rootMargin = marginTop + \"px 0px \" + marginBottom + \"px 0px\";\n      var options = { rootMargin: rootMargin };\n      // console.log(options);\n      var obs = new IntersectionObserver(intersectViewportBelow, options);\n      obs.observe(el);\n      return obs;\n    });\n  }\n\n  // look above for intersection\n  function updateStepAboveIO() {\n    io.stepAbove = stepEl.map(function (el, i) {\n      var marginTop = -offsetMargin + stepOffsetHeight[i];\n      var marginBottom = offsetMargin - viewH;\n      var rootMargin = marginTop + \"px 0px \" + marginBottom + \"px 0px\";\n      var options = { rootMargin: rootMargin };\n      // console.log(options);\n      var obs = new IntersectionObserver(intersectStepAbove, options);\n      obs.observe(el);\n      return obs;\n    });\n  }\n\n  // look below for intersection\n  function updateStepBelowIO() {\n    io.stepBelow = stepEl.map(function (el, i) {\n      var marginTop = -offsetMargin;\n      var marginBottom = offsetMargin - viewH + stepOffsetHeight[i];\n      var rootMargin = marginTop + \"px 0px \" + marginBottom + \"px 0px\";\n      var options = { rootMargin: rootMargin };\n      // console.log(options);\n      var obs = new IntersectionObserver(intersectStepBelow, options);\n      obs.observe(el);\n      return obs;\n    });\n  }\n\n  // progress progress tracker\n  function updateStepProgressIO() {\n    io.stepProgress = stepEl.map(function (el, i) {\n      var marginTop = stepOffsetHeight[i] - offsetMargin;\n      var marginBottom = -viewH + offsetMargin;\n      var rootMargin = marginTop + \"px 0px \" + marginBottom + \"px 0px\";\n      var threshold = createThreshold(stepOffsetHeight[i]);\n      var options = { rootMargin: rootMargin, threshold: threshold };\n      // console.log(options);\n      var obs = new IntersectionObserver(intersectStepProgress, options);\n      obs.observe(el);\n      return obs;\n    });\n  }\n\n  function updateIO() {\n    OBSERVER_NAMES.forEach(disconnectObserver);\n\n    updateViewportAboveIO();\n    updateViewportBelowIO();\n    updateStepAboveIO();\n    updateStepBelowIO();\n\n    if (progressMode) { updateStepProgressIO(); }\n  }\n\n  /* SETUP FUNCTIONS */\n\n  function indexSteps() {\n    stepEl.forEach(function (el, i) { return el.setAttribute(\"data-scrollama-index\", i); });\n  }\n\n  function setupStates() {\n    stepStates = stepEl.map(function () { return ({\n      direction: null,\n      state: null,\n      progress: 0\n    }); });\n  }\n\n  function addDebug() {\n    if (isDebug) { setup({ id: id, stepEl: stepEl, offsetVal: offsetVal }); }\n  }\n\n  function isYScrollable(element) {\n    var style = window.getComputedStyle(element);\n    return (\n      (style.overflowY === \"scroll\" || style.overflowY === \"auto\") &&\n      element.scrollHeight > element.clientHeight\n    );\n  }\n\n  // recursively search the DOM for a parent container with overflowY: scroll and fixed height\n  // ends at document\n  function anyScrollableParent(element) {\n    if (element && element.nodeType === 1) {\n      // check dom elements only, stop at document\n      // if a scrollable element is found return the element\n      // if not continue to next parent\n      return isYScrollable(element)\n        ? element\n        : anyScrollableParent(element.parentNode);\n    }\n    return false; // didn't find a scrollable parent\n  }\n\n  var S = {};\n\n  S.setup = function (ref) {\n    var step = ref.step;\n    var parent = ref.parent;\n    var offset = ref.offset; if ( offset === void 0 ) offset = 0.5;\n    var progress = ref.progress; if ( progress === void 0 ) progress = false;\n    var threshold = ref.threshold; if ( threshold === void 0 ) threshold = 4;\n    var debug = ref.debug; if ( debug === void 0 ) debug = false;\n    var order = ref.order; if ( order === void 0 ) order = true;\n    var once = ref.once; if ( once === void 0 ) once = false;\n\n    reset();\n    // create id unique to this scrollama instance\n    id = generateInstanceID();\n\n    stepEl = selectAll(step, parent);\n\n    if (!stepEl.length) {\n      err(\"no step elements\");\n      return S;\n    }\n\n    // ensure that no step has a scrollable parent element in the dom tree\n    // check current step for scrollable parent\n    // assume no scrollable parents to start\n    var scrollableParent = stepEl.reduce(\n      function (foundScrollable, s) { return foundScrollable || anyScrollableParent(s.parentNode); },\n      false\n    );\n    if (scrollableParent) {\n      console.error(\n        \"scrollama error: step elements cannot be children of a scrollable element. Remove any css on the parent element with overflow: scroll; or overflow: auto; on elements with fixed height.\",\n        scrollableParent\n      );\n    }\n\n    // options\n    isDebug = debug;\n    progressMode = progress;\n    preserveOrder = order;\n    triggerOnce = once;\n\n    S.offsetTrigger(offset);\n    progressThreshold = Math.max(1, +threshold);\n\n    isReady = true;\n\n    // customize\n    addDebug();\n    indexSteps();\n    setupStates();\n    handleResize();\n    S.enable();\n    return S;\n  };\n\n  S.resize = function () {\n    handleResize();\n    return S;\n  };\n\n  S.enable = function () {\n    handleEnable(true);\n    return S;\n  };\n\n  S.disable = function () {\n    handleEnable(false);\n    return S;\n  };\n\n  S.destroy = function () {\n    handleEnable(false);\n    reset();\n  };\n\n  S.offsetTrigger = function (x) {\n    if (x === null) { return offsetVal; }\n\n    if (typeof x === \"number\") {\n      format = \"percent\";\n      if (x > 1) { err(\"offset value is greater than 1. Fallback to 1.\"); }\n      if (x < 0) { err(\"offset value is lower than 0. Fallback to 0.\"); }\n      offsetVal = Math.min(Math.max(0, x), 1);\n    } else if (typeof x === \"string\" && x.indexOf(\"px\") > 0) {\n      var v = +x.replace(\"px\", \"\");\n      if (!isNaN(v)) {\n        format = \"pixels\";\n        offsetVal = v;\n      } else {\n        err(\"offset value must be in 'px' format. Fallback to 0.5.\");\n        offsetVal = 0.5;\n      }\n    } else {\n      err(\"offset value does not include 'px'. Fallback to 0.5.\");\n      offsetVal = 0.5;\n    }\n    return S;\n  };\n\n  S.onStepEnter = function (f) {\n    if (typeof f === \"function\") { cb.stepEnter = f; }\n    else { err(\"onStepEnter requires a function\"); }\n    return S;\n  };\n\n  S.onStepExit = function (f) {\n    if (typeof f === \"function\") { cb.stepExit = f; }\n    else { err(\"onStepExit requires a function\"); }\n    return S;\n  };\n\n  S.onStepProgress = function (f) {\n    if (typeof f === \"function\") { cb.stepProgress = f; }\n    else { err(\"onStepProgress requires a function\"); }\n    return S;\n  };\n\n  return S;\n}\n\nreturn scrollama;\n\n})));\n","<script>\n  import { onMount } from 'svelte';\n  import Meta from \"./Meta.svelte\";\n  import Text from \"./Text.svelte\";\n  import Pole from \"./Pole.svelte\";\n  import Chapstick from \"./Chapstick.svelte\";\n  import BestBuy from \"./BestBuy.svelte\";\n  import BlockChart from \"./BlockChart.svelte\";\n  import SmallChart from \"./SmallChart.svelte\";\n  import Header from \"./pudding/Header.svelte\";\n  import Footer from \"./pudding/Footer.svelte\";\n  import copy from \"../data/doc.json\";\n  import data from \"../data/data.csv\";\n  import previews from \"../data/song-previews.csv\";\n  import {selection, select, selectAll} from \"d3-selection\";\n  import {filter} from \"d3-array\";\n  import inView from \"../actions/inView.js\";\n  import \"intersection-observer\";\n  import scrollama from \"scrollama\";\n\n  let section;\n\n  // AUDIO\n  let audioEl;\n  let songSpans;\n  let songPlaying = false;\n  let songHighlights;\n\n  function playSong(e) {\n    const songId = this.id\n\n    this.style.backgroundImage = `url(\"assets/images/volume-x.svg\")`\n\n    const songUrl = previews.filter(d => d.shortname == songId)[0].preview\n    audioEl.src = songUrl;\n\n    if (songPlaying) {\n      audioEl.pause();\n      this.style.backgroundImage = `url(\"assets/images/volume-2.svg\")`\n    }\n    else {\n      audioEl.play();\n      this.style.backgroundImage = `url(\"assets/images/volume-x.svg\")`\n    }\n\n    songPlaying = !songPlaying;\n  }\n\n  // SCROLL\n  const scroller = scrollama();\n  const scrollContainer = select('#scroll');\n  const scrollGraphic = scrollContainer.select('.scroll__graphic');\n  const scrollText = scrollContainer.select('.scroll__text');\n  let scrollStep;\n\n  function scrollDimensions() {\n    const stepHeight = Math.floor(window.innerHeight * 0.75);\n    scrollStep.style('height', stepHeight + 'px');\n\n    const bodyWidth = select('body').node().offsetWidth;\n    scrollGraphic.style('height', (window.innerHeight) + 'px');\n  }\n\n  function scrollSetup() {\n    scroller.setup({\n      container: '#scroll', // our outermost scrollytelling element\n      graphic: '.scroll__graphic', // the graphic\n      text: '.scroll__text', // the step container\n      step: '.scroll__text .step', // the step elements\n      offset: 0.5, // set the trigger to be 1/2 way down screen\n      debug: false, // display the trigger offset for testing\n    })\n    .onStepEnter(handleStepEnter)\n  }\n\n  function handleStepEnter(response) {\n    scrollStep.classed('is-active', (d, i) => i === response.index);\n\n    renderStep(response.index)\n  }\n\n  function renderStep(index) {\n    songHighlights.classed(\"is-highlighted\", false);\n    songHighlights.style(\"background-image\", \"none\");\n    const song = songHighlights.filter((d, i) => i ==index)\n    song.classed(\"is-highlighted\", true)\n\n    if (index == 0) { song.style('background-image', `url('assets/images/ikissedagirl.jpg')`) }\n    if (index == 1) { song.style('background-image', `url('assets/images/pokerface.jpg')`) }\n    if (index == 2) { song.style('background-image', `url('assets/images/ifyouseekamy.jpg')`) }\n    if (index == 3) { song.style('background-image', `url('assets/images/samelove.jpg')`) }\n    if (index == 4) { song.style('background-image', `url('assets/images/girlcrush.jpg')`) }\n    if (index == 5) { song.style('background-image', `url('assets/images/badatlove.jpg')`) }\n    if (index == 6) { song.style('background-image', `url('assets/images/bartiercardi.jpg')`) }\n    if (index == 7) { song.style('background-image', `url('assets/images/money.jpg')`) }\n  }\n\n  // MOUNT\n  onMount(() => {\n    songSpans = selectAll('.song-snippet');\n    songSpans.on(\"click\", playSong);\n\n    songHighlights = selectAll(\".song-highlight\")\n    scrollStep = selectAll(\".step\");\n    scrollDimensions();\n    scrollSetup();\n\t});\n\n</script>\n\n<Meta />\n\n<Header />\n\n<Pole />\n<Chapstick />\n<Text copy=\"{copy.prose1}\" section=1/>\n<BestBuy />\n<Text copy=\"{copy.prose2}\" section=2/>\n<Text copy=\"{copy.prose3}\" section=3/>\n<BlockChart data=\"{data}\" />\n<Text copy=\"{copy.prose5}\" section=5/>\n<SmallChart data=\"{data}\" />\n<Text copy=\"{copy.prose6}\" section=6/>\n<Text copy=\"{copy.method}\" section=7/>\n\n\n<audio bind:this=\"{audioEl}\" src=\"\"> </audio>\n\n<Footer />","import App from \"./components/App.svelte\";\n\nconst dev = !!import.meta.hot;\n\nconst app = new App({\n  target: document.querySelector(\"main\"),\n  hydrate: !dev\n});\n\nif (dev) {\n  import.meta.hot.dispose(() => {\n    app.$destroy();\n  });\n  import.meta.hot.accept();\n}\n\nexport default app;\n"],"names":["noop","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","action_destroyer","action_result","destroy","append","target","node","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","destroy_each","iterations","detaching","i","length","d","element","name","document","createElement","text","data","createTextNode","space","empty","listen","event","handler","options","addEventListener","removeEventListener","attr","attribute","value","removeAttribute","getAttribute","setAttribute","children","Array","from","childNodes","claim_element","nodes","attributes","svg","nodeName","j","remove","push","k","splice","createElementNS","svg_element","claim_text","nodeType","claim_space","set_style","key","important","style","setProperty","HtmlTag","[object Object]","this","e","n","html","t","h","innerHTML","current_component","set_current_component","component","get_current_component","Error","onMount","$$","on_mount","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","Promise","resolve","update_scheduled","add_render_callback","flushing","seen_callbacks","Set","flush","update","pop","callback","has","add","clear","fragment","before_update","dirty","p","ctx","after_update","outroing","outros","transition_in","block","local","delete","transition_out","o","c","handle_promise","promise","info","token","type","index","resolved","child_ctx","undefined","slice","current","needs_flush","blocks","r","m","mount","then","error","catch","hasCatch","pending","create_component","claim_component","parent_nodes","l","mount_component","customElement","on_destroy","new_on_destroy","map","filter","destroy_component","make_dirty","fill","init","instance","create_fragment","not_equal","props","parent_component","bound","on_disconnect","context","Map","callbacks","skip_bound","ready","ret","rest","hydrate","intro","SvelteComponent","$destroy","indexOf","$$props","obj","$$set","keys","selector","parent","body","querySelectorAll","inView","params","observer","handleIntersect","v","isIntersecting","dispatchEvent","CustomEvent","setObserver","root","top","bottom","rootMargin","disconnect","IntersectionObserver","observe","xhtml","xlink","xml","xmlns","prefix","namespaces","hasOwnProperty","creatorInherit","ownerDocument","uri","namespaceURI","documentElement","creatorFixed","fullname","namespace","none","querySelector","x","childMatcher","matches","find","prototype","childFirst","firstElementChild","EnterNode","datum","_next","_parent","__data__","bindIndex","group","enter","exit","groupLength","dataLength","bindKey","keyValue","nodeByKeyValue","keyValues","call","set","get","ascending","NaN","attrRemove","attrRemoveNS","removeAttributeNS","attrConstant","attrConstantNS","setAttributeNS","attrFunction","apply","arguments","attrFunctionNS","defaultView","styleRemove","removeProperty","styleConstant","priority","styleFunction","styleValue","getPropertyValue","getComputedStyle","propertyRemove","propertyConstant","propertyFunction","classArray","string","trim","split","classList","ClassList","_node","_names","classedAdd","names","list","classedRemove","classedTrue","classedFalse","classedFunction","textRemove","textContent","textConstant","textFunction","htmlRemove","htmlConstant","htmlFunction","raise","nextSibling","lower","previousSibling","firstChild","constantNull","selection_cloneShallow","clone","cloneNode","selection_cloneDeep","parseTypenames","typenames","onRemove","typename","on","__on","listener","onAdd","contextListener","window","createEvent","initEvent","bubbles","cancelable","detail","dispatchConstant","dispatchFunction","constructor","child","next","join","contains","Selection","groups","parents","_groups","_parents","array","chapstickDivs","buildingDiv","dvdDiv","copy","section","sectionNum","parseInt","visibleChapstick","visibleBestBuy","showChapstick","classed","animationSequence","selectAll","select","subgroups","subnode","subgroup","arrayAll","selectorAll","selectChild","match","childFind","selectChildren","childrenFilter","matcher","bind","constant","enterGroup","updateGroup","exitGroup","previous","i0","i1","_enter","_exit","sparse","onenter","onupdate","onexit","merge","order","selection","groups0","groups1","m0","m1","Math","min","merges","group0","group1","compareDocumentPosition","sort","compare","compareNode","sortgroups","sortgroup","size","each","getAttributeNS","property","creator","before","deep","dispatch","Symbol","iterator","padding","y","max","clientHeight","scrollHeight","offsetHeight","InternMap","entries","keyof","super","defineProperties","_intern","_key","intern_get","intern_set","intern_delete","valueOf","values","nest","identity","reduce","regroup","artist","lyricFlag","song","lyrics","prose4","dataByYear","year","console","log","songClick","relationshipType","sampleLyrics","dataQueerArtists","queerFlag","dataQueerSpotlight","artistID","rollup","wordmark","toUpperCase","url","Date","now","localURL","location","href","response","fetch","json","IntersectionObserverEntry","defineProperty","intersectionRatio","startDoc","doc","frame","getFrameElement","registry","crossOriginUpdater","crossOriginRect","THROTTLE_TIMEOUT","POLL_INTERVAL","USE_MUTATION_OBSERVER","_setupCrossOriginUpdater","boundingClientRect","intersectionRect","convertFromParentRect","left","right","width","height","_checkForIntersections","_resetCrossOriginUpdater","_observationTargets","some","item","_registerInstance","entry","_monitorIntersections","unobserve","_unmonitorIntersections","_unregisterInstance","_unmonitorAllIntersections","takeRecords","records","_queuedEntries","_initThresholds","opt_threshold","threshold","isArray","isNaN","_parseRootMargin","opt_rootMargin","margins","margin","parts","exec","parseFloat","unit","win","_monitoringDocuments","monitoringInterval","domObserver","setInterval","addEvent","MutationObserver","childList","characterData","subtree","_monitoringUnsubscribes","clearInterval","removeEvent","rootDoc","itemDoc","unsubscribe","unsubscribes","rootIsInDom","_rootIsInDom","rootRect","_getRootRect","targetRect","getBoundingClientRect","rootContainsTarget","_rootContainsTarget","oldEntry","_computeTargetAndRootIntersection","rootBounds","newEntry","time","performance","_hasCrossedThreshold","_callback","display","rect1","rect2","getParentNode","atRoot","parentRect","parentComputedStyle","frameRect","frameIntersect","overflow","isDoc","clientWidth","_expandRectByRootMargin","rect","_rootMarginValues","newRect","oldRatio","newRatio","thresholds","containsDeep","frameElement","ensureDOMRect","targetArea","intersectionArea","Number","toFixed","opt_options","timeout","timer","setTimeout","opt_useCapture","attachEvent","detatchEvent","el","err","parentBoundingRect","parentIntersectionRect","assignedSlot","host","module","Element","NodeList","getOffsetId","id","setupOffset","ref","offsetVal","stepClass","className","position","borderTop","zIndex","fontSize","fontFamily","color","setup","stepEl","offsetMargin","post","format","idVal","getElementById","innerText","notifyStep","state","elA","elB","scrollama","OBSERVER_NAMES","cb","io","stepOffsetHeight","stepOffsetTop","stepStates","viewH","pageH","previousYOffset","progressThreshold","isReady","isEnabled","isDebug","progressMode","preserveOrder","triggerOnce","direction","exclude","msg","reset","stepEnter","stepExit","stepProgress","generateInstanceID","floor","random","getOffsetTop","pageYOffset","clientTop","getPageHeight","getIndex","updateDirection","disconnectObserver","handleResize","innerHeight","updateIO","handleEnable","enable","createThreshold","count","ceil","ratio","notifyStepProgress","progress","resp","notifyOthers","ss","notifyStepEnter","notifyStepExit","i$1","ss$1","dir","check","intersectStepAbove","topAdjusted","bottomAdjusted","intersectStepBelow","intersectViewportAbove","intersectViewportBelow","intersectStepProgress","updateViewportAboveIO","viewportAbove","marginTop","marginBottom","obs","updateViewportBelowIO","viewportBelow","updateStepAboveIO","stepAbove","updateStepBelowIO","stepBelow","updateStepProgressIO","indexSteps","setupStates","addDebug","isYScrollable","overflowY","anyScrollableParent","S","step","offset","debug","once","scrollableParent","foundScrollable","s","offsetTrigger","resize","disable","replace","onStepEnter","f","onStepExit","onStepProgress","factory","prose1","prose2","prose3","prose5","prose6","method","audioEl","songSpans","songHighlights","songPlaying","playSong","songId","backgroundImage","songUrl","previews","shortname","preview","src","pause","play","scroller","scrollContainer","scrollGraphic","scrollStep","handleStepEnter","renderStep","stepHeight","offsetWidth","scrollDimensions","container","graphic","app"],"mappings":"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"}